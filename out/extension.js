"use strict";var _n=Object.create;var Xe=Object.defineProperty;var kn=Object.getOwnPropertyDescriptor;var En=Object.getOwnPropertyNames;var qn=Object.getPrototypeOf,xn=Object.prototype.hasOwnProperty;var An=(f,c)=>()=>(c||f((c={exports:{}}).exports,c),c.exports),Sn=(f,c)=>{for(var h in c)Xe(f,h,{get:c[h],enumerable:!0})},br=(f,c,h,b)=>{if(c&&typeof c=="object"||typeof c=="function")for(let _ of En(c))!xn.call(f,_)&&_!==h&&Xe(f,_,{get:()=>c[_],enumerable:!(b=kn(c,_))||b.enumerable});return f};var Ue=(f,c,h)=>(h=f!=null?_n(qn(f)):{},br(c||!f||!f.__esModule?Xe(h,"default",{value:f,enumerable:!0}):h,f)),Mn=f=>br(Xe({},"__esModule",{value:!0}),f);var wr=An((Je,de)=>{var Ye=void 0,Ge=function(f){return Ye||(Ye=new Promise(function(c,h){var b=typeof f<"u"?f:{},_=b.onAbort;b.onAbort=function(e){h(new Error(e)),_&&_(e)},b.postRun=b.postRun||[],b.postRun.push(function(){c(b)}),de=void 0;var o;o||=typeof b<"u"?b:{};var $=typeof window=="object",L=typeof WorkerGlobalScope<"u",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";o.onRuntimeInitialized=function(){function e(s,l){switch(typeof l){case"boolean":gn(s,l?1:0);break;case"number":bn(s,l);break;case"string":wn(s,l,-1,-1);break;case"object":if(l===null)hr(s);else if(l.length!=null){var p=Qe(l,Be);vn(s,p,l.length,-1),He(p)}else Ve(s,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:hr(s)}}function t(s,l){for(var p=[],g=0;g<s;g+=1){var y=ee(l+4*g,"i32"),A=fn(y);if(A===1||A===2)y=mn(y);else if(A===3)y=dn(y);else if(A===4){A=y,y=hn(A),A=pn(A);for(var J=new Uint8Array(y),X=0;X<y;X+=1)J[X]=I[A+X];y=J}else y=null;p.push(y)}return p}function r(s,l){this.Qa=s,this.db=l,this.Oa=1,this.lb=[]}function n(s,l){if(this.db=l,l=qe(s)+1,this.eb=qt(l),this.eb===null)throw Error("Unable to allocate memory for the SQL string");te(s,x,this.eb,l),this.kb=this.eb,this.Za=this.pb=null}function i(s){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),s!=null){var l=this.filename,p="/",g=l;if(p&&(p=typeof p=="string"?p:ht(p),g=l?lt(p+"/"+l):p),l=Ct(!0,!0),g=Or(g,l),s){if(typeof s=="string"){p=Array(s.length);for(var y=0,A=s.length;y<A;++y)p[y]=s.charCodeAt(y);s=p}Oe(g,l|146),p=ge(g,577),rr(p,s,0,s.length,0),vt(p),Oe(g,l)}}this.handleError(w(this.filename,a)),this.db=ee(a,"i32"),pr(this.db),this.fb={},this.Sa={}}var a=ae(4),u=o.cwrap,w=u("sqlite3_open","number",["string","number"]),q=u("sqlite3_close_v2","number",["number"]),E=u("sqlite3_exec","number",["number","string","number","number","number"]),T=u("sqlite3_changes","number",["number"]),Q=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),ar=u("sqlite3_sql","string",["number"]),Vr=u("sqlite3_normalized_sql","string",["number"]),ur=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Xr=u("sqlite3_bind_text","number",["number","number","number","number","number"]),lr=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),Yr=u("sqlite3_bind_double","number",["number","number","number"]),Gr=u("sqlite3_bind_int","number",["number","number","number"]),Jr=u("sqlite3_bind_parameter_index","number",["number","string"]),Kr=u("sqlite3_step","number",["number"]),Zr=u("sqlite3_errmsg","string",["number"]),en=u("sqlite3_column_count","number",["number"]),tn=u("sqlite3_data_count","number",["number"]),rn=u("sqlite3_column_double","number",["number","number"]),cr=u("sqlite3_column_text","string",["number","number"]),nn=u("sqlite3_column_blob","number",["number","number"]),on=u("sqlite3_column_bytes","number",["number","number"]),sn=u("sqlite3_column_type","number",["number","number"]),an=u("sqlite3_column_name","string",["number","number"]),un=u("sqlite3_reset","number",["number"]),ln=u("sqlite3_clear_bindings","number",["number"]),cn=u("sqlite3_finalize","number",["number"]),fr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),fn=u("sqlite3_value_type","number",["number"]),hn=u("sqlite3_value_bytes","number",["number"]),dn=u("sqlite3_value_text","string",["number"]),pn=u("sqlite3_value_blob","number",["number"]),mn=u("sqlite3_value_double","number",["number"]),bn=u("sqlite3_result_double","",["number","number"]),hr=u("sqlite3_result_null","",["number"]),wn=u("sqlite3_result_text","",["number","string","number","number"]),vn=u("sqlite3_result_blob","",["number","number","number","number"]),gn=u("sqlite3_result_int","",["number","number"]),Ve=u("sqlite3_result_error","",["number","string","number"]),dr=u("sqlite3_aggregate_context","number",["number","number"]),pr=u("RegisterExtensionFunctions","number",["number"]),mr=u("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(s){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(s)?this.Cb(s):s!=null&&typeof s=="object"?this.Db(s):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var s=Kr(this.Qa);switch(s){case 100:return!0;case 101:return!1;default:throw this.db.handleError(s)}},r.prototype.wb=function(s){return s==null&&(s=this.Oa,this.Oa+=1),rn(this.Qa,s)},r.prototype.Gb=function(s){if(s==null&&(s=this.Oa,this.Oa+=1),s=cr(this.Qa,s),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(s)},r.prototype.Hb=function(s){return s==null&&(s=this.Oa,this.Oa+=1),cr(this.Qa,s)},r.prototype.getBlob=function(s){s==null&&(s=this.Oa,this.Oa+=1);var l=on(this.Qa,s);s=nn(this.Qa,s);for(var p=new Uint8Array(l),g=0;g<l;g+=1)p[g]=I[s+g];return p},r.prototype.get=function(s,l){l=l||{},s!=null&&this.bind(s)&&this.step(),s=[];for(var p=tn(this.Qa),g=0;g<p;g+=1)switch(sn(this.Qa,g)){case 1:var y=l.useBigInt?this.Gb(g):this.wb(g);s.push(y);break;case 2:s.push(this.wb(g));break;case 3:s.push(this.Hb(g));break;case 4:s.push(this.getBlob(g));break;default:s.push(null)}return s},r.prototype.getColumnNames=function(){for(var s=[],l=en(this.Qa),p=0;p<l;p+=1)s.push(an(this.Qa,p));return s},r.prototype.getAsObject=function(s,l){s=this.get(s,l),l=this.getColumnNames();for(var p={},g=0;g<l.length;g+=1)p[l[g]]=s[g];return p},r.prototype.getSQL=function(){return ar(this.Qa)},r.prototype.getNormalizedSQL=function(){return Vr(this.Qa)},r.prototype.run=function(s){return s!=null&&this.bind(s),this.step(),this.reset()},r.prototype.sb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1),s=jt(s);var p=Qe(s,Be);this.lb.push(p),this.db.handleError(Xr(this.Qa,l,p,s.length-1,0))},r.prototype.Bb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1);var p=Qe(s,Be);this.lb.push(p),this.db.handleError(lr(this.Qa,l,p,s.length,0))},r.prototype.rb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1),this.db.handleError((s===(s|0)?Gr:Yr)(this.Qa,l,s))},r.prototype.Eb=function(s){s==null&&(s=this.Oa,this.Oa+=1),lr(this.Qa,s,0,0,0)},r.prototype.tb=function(s,l){switch(l==null&&(l=this.Oa,this.Oa+=1),typeof s){case"string":this.sb(s,l);return;case"number":this.rb(s,l);return;case"bigint":this.sb(s.toString(),l);return;case"boolean":this.rb(s+0,l);return;case"object":if(s===null){this.Eb(l);return}if(s.length!=null){this.Bb(s,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+s+")."},r.prototype.Db=function(s){var l=this;return Object.keys(s).forEach(function(p){var g=Jr(l.Qa,p);g!==0&&l.tb(s[p],g)}),!0},r.prototype.Cb=function(s){for(var l=0;l<s.length;l+=1)this.tb(s[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),ln(this.Qa)===0&&un(this.Qa)===0},r.prototype.freemem=function(){for(var s;(s=this.lb.pop())!==void 0;)He(s)},r.prototype.free=function(){this.freemem();var s=cn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,s},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var s=$e(),l=ae(4);Ee(a),Ee(l);try{this.db.handleError(ur(this.db.db,this.kb,-1,a,l)),this.kb=ee(l,"i32");var p=ee(a,"i32");return p===0?(this.mb(),{done:!0}):(this.Za=new r(p,this.db),this.db.fb[p]=this.Za,{value:this.Za,done:!1})}catch(g){throw this.pb=ut(this.kb),this.mb(),g}finally{Me(s)}},n.prototype.mb=function(){He(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:ut(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(s,l){if(!this.db)throw"Database closed";if(l){s=this.prepare(s,l);try{s.step()}finally{s.free()}}else this.handleError(E(this.db,s,0,0,a));return this},i.prototype.exec=function(s,l,p){if(!this.db)throw"Database closed";var g=$e(),y=null;try{var A=kt(s),J=ae(4);for(s=[];ee(A,"i8")!==0;){Ee(a),Ee(J),this.handleError(ur(this.db,A,-1,a,J));var X=ee(a,"i32");if(A=ee(J,"i32"),X!==0){var H=null;for(y=new r(X,this),l!=null&&y.bind(l);y.step();)H===null&&(H={columns:y.getColumnNames(),values:[]},s.push(H)),H.values.push(y.get(null,p));y.free()}}return s}catch(K){throw y&&y.free(),K}finally{Me(g)}},i.prototype.each=function(s,l,p,g,y){typeof l=="function"&&(g=p,p=l,l=void 0),s=this.prepare(s,l);try{for(;s.step();)p(s.getAsObject(null,y))}finally{s.free()}if(typeof g=="function")return g()},i.prototype.prepare=function(s,l){if(Ee(a),this.handleError(Q(this.db,s,-1,a,0)),s=ee(a,"i32"),s===0)throw"Nothing to prepare";var p=new r(s,this);return l!=null&&p.bind(l),this.fb[s]=p},i.prototype.iterateStatements=function(s){return new n(s,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(l){l.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.handleError(q(this.db));var s=Wr(this.filename);return this.handleError(w(this.filename,a)),this.db=ee(a,"i32"),pr(this.db),s},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(s){s.free()}),Object.values(this.Sa).forEach(se),this.Sa={},this.Ya&&(se(this.Ya),this.Ya=void 0),this.handleError(q(this.db)),Jt("/"+this.filename),this.db=null)},i.prototype.handleError=function(s){if(s===0)return null;throw s=Zr(this.db),Error(s)},i.prototype.getRowsModified=function(){return T(this.db)},i.prototype.create_function=function(s,l){Object.prototype.hasOwnProperty.call(this.Sa,s)&&(se(this.Sa[s]),delete this.Sa[s]);var p=Se(function(g,y,A){y=t(y,A);try{var J=l.apply(null,y)}catch(X){Ve(g,X,-1);return}e(g,J)},"viii");return this.Sa[s]=p,this.handleError(fr(this.db,s,l.length,1,0,p,0,0,0)),this},i.prototype.create_aggregate=function(s,l){var p=l.init||function(){return null},g=l.finalize||function(H){return H},y=l.step;if(!y)throw"An aggregate function must have a step function in "+s;var A={};Object.hasOwnProperty.call(this.Sa,s)&&(se(this.Sa[s]),delete this.Sa[s]),l=s+"__finalize",Object.hasOwnProperty.call(this.Sa,l)&&(se(this.Sa[l]),delete this.Sa[l]);var J=Se(function(H,K,At){var he=dr(H,1);Object.hasOwnProperty.call(A,he)||(A[he]=p()),K=t(K,At),K=[A[he]].concat(K);try{A[he]=y.apply(null,K)}catch(yn){delete A[he],Ve(H,yn,-1)}},"viii"),X=Se(function(H){var K=dr(H,1);try{var At=g(A[K])}catch(he){delete A[K],Ve(H,he,-1);return}e(H,At),delete A[K]},"vi");return this.Sa[s]=J,this.Sa[l]=X,this.handleError(fr(this.db,s,y.length-1,1,0,0,J,X,0)),this},i.prototype.updateHook=function(s){this.Ya&&(mr(this.db,0,0),se(this.Ya),this.Ya=void 0),s&&(this.Ya=Se(function(l,p,g,y,A){switch(p){case 18:l="insert";break;case 23:l="update";break;case 9:l="delete";break;default:throw"unknown operationCode in updateHook callback: "+p}if(g=g?R(x,g):"",y=y?R(x,y):"",A>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";s(l,g,y,Number(A))},"viiiij"),mr(this.db,this.Ya,0))},o.Database=i};var O={...o},W="./this.program",D=(e,t)=>{throw t},F="",ne,pe;if(C){var tt=require("fs");require("path"),F=__dirname+"/",pe=e=>(e=Ne(e)?new URL(e):e,tt.readFileSync(e)),ne=async e=>(e=Ne(e)?new URL(e):e,tt.readFileSync(e,void 0)),!o.thisProgram&&1<process.argv.length&&(W=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof de<"u"&&(de.exports=o),D=(e,t)=>{throw process.exitCode=e,t}}else($||L)&&(L?F=self.location.href:typeof document<"u"&&document.currentScript&&(F=document.currentScript.src),F=F.startsWith("blob:")?"":F.slice(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1),L&&(pe=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ne=async e=>{if(Ne(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var St=o.print||console.log.bind(console),me=o.printErr||console.error.bind(console);Object.assign(o,O),O=null,o.thisProgram&&(W=o.thisProgram);var De=o.wasmBinary,Te,Pe=!1,rt,I,x,_e,S,j,nt,G,it,Ne=e=>e.startsWith("file://");function Mt(){var e=Te.buffer;o.HEAP8=I=new Int8Array(e),o.HEAP16=_e=new Int16Array(e),o.HEAPU8=x=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAP32=S=new Int32Array(e),o.HEAPU32=j=new Uint32Array(e),o.HEAPF32=nt=new Float32Array(e),o.HEAPF64=it=new Float64Array(e),o.HEAP64=G=new BigInt64Array(e),o.HEAPU64=new BigUint64Array(e)}var ue=0,ke=null;function be(e){throw o.onAbort?.(e),e="Aborted("+e+")",me(e),Pe=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var ot;async function Ar(e){if(!De)try{var t=await ne(e);return new Uint8Array(t)}catch{}if(e==ot&&De)e=new Uint8Array(De);else if(pe)e=pe(e);else throw"both async and sync fetching of the wasm failed";return e}async function Sr(e,t){try{var r=await Ar(e);return await WebAssembly.instantiate(r,t)}catch(n){me(`failed to asynchronously prepare wasm: ${n}`),be(n)}}async function Mr(e){var t=ot;if(!De&&typeof WebAssembly.instantiateStreaming=="function"&&!Ne(t)&&!C)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){me(`wasm streaming compile failed: ${n}`),me("falling back to ArrayBuffer instantiation")}return Sr(t,e)}class st{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var $t=e=>{for(;0<e.length;)e.shift()(o)},Ut=[],Rt=[],$r=()=>{var e=o.preRun.shift();Rt.unshift(e)};function ee(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return I[e];case"i8":return I[e];case"i16":return _e[e>>1];case"i32":return S[e>>2];case"i64":return G[e>>3];case"float":return nt[e>>2];case"double":return it[e>>3];case"*":return j[e>>2];default:be(`invalid type for getValue: ${t}`)}}var at=o.noExitRuntime||!0;function Ee(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":I[e]=0;break;case"i8":I[e]=0;break;case"i16":_e[e>>1]=0;break;case"i32":S[e>>2]=0;break;case"i64":G[e>>3]=BigInt(0);break;case"float":nt[e>>2]=0;break;case"double":it[e>>3]=0;break;case"*":j[e>>2]=0;break;default:be(`invalid type for setValue: ${t}`)}}var Dt=typeof TextDecoder<"u"?new TextDecoder:void 0,R=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&Dt)return Dt.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var a=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var u=e[t++]&63;i=(i&240)==224?(i&15)<<12|a<<6|u:(i&7)<<18|a<<12|u<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},ut=(e,t)=>e?R(x,e,t):"",Tt=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},lt=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=Tt(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},Pt=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&=t.slice(0,-1),e+t)},je=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Ur=()=>{if(C){var e=require("crypto");return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},Nt=e=>{(Nt=Ur())(e)},Rr=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Tt(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},ct=[],qe=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},te=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<e.length;++a){var u=e.charCodeAt(a);if(55296<=u&&57343>=u){var w=e.charCodeAt(++a);u=65536+((u&1023)<<10)|w&1023}if(127>=u){if(r>=n)break;t[r++]=u}else{if(2047>=u){if(r+1>=n)break;t[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;t[r++]=224|u>>12}else{if(r+3>=n)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63}t[r++]=128|u>>6&63}t[r++]=128|u&63}}return t[r]=0,r-i},jt=(e,t)=>{var r=Array(qe(e)+1);return e=te(e,r,0,r.length),t&&(r.length=e),r},It=[];function Lt(e,t){It[e]={input:[],output:[],cb:t},bt(e,Dr)}var Dr={open(e){var t=It[e.node.rdev];if(!t)throw new d(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new d(60);for(var i=0,a=0;a<n;a++){try{var u=e.tty.cb.xb(e.tty)}catch{throw new d(29)}if(u===void 0&&i===0)throw new d(6);if(u==null)break;i++,t[r+a]=u}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new d(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new d(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},Tr={xb(){e:{if(!ct.length){var e=null;if(C){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=tt.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}ct=jt(e,!0)}e=ct.shift()}return e},qb(e,t){t===null||t===10?(St(R(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(St(R(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Pr={qb(e,t){t===null||t===10?(me(R(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(me(R(e.output)),e.output=[])}},k={Wa:null,Xa(){return k.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new d(63);return k.Wa||(k.Wa={dir:{node:{Ta:k.La.Ta,Ua:k.La.Ua,lookup:k.La.lookup,hb:k.La.hb,rename:k.La.rename,unlink:k.La.unlink,rmdir:k.La.rmdir,readdir:k.La.readdir,symlink:k.La.symlink},stream:{Va:k.Ma.Va}},file:{node:{Ta:k.La.Ta,Ua:k.La.Ua},stream:{Va:k.Ma.Va,read:k.Ma.read,write:k.Ma.write,ib:k.Ma.ib,jb:k.Ma.jb}},link:{node:{Ta:k.La.Ta,Ua:k.La.Ua,readlink:k.La.readlink},stream:{}},ub:{node:{Ta:k.La.Ta,Ua:k.La.Ua},stream:Cr}}),r=Bt(e,t,r,n),B(r.mode)?(r.La=k.Wa.dir.node,r.Ma=k.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=k.Wa.file.node,r.Ma=k.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=k.Wa.link.node,r.Ma=k.Wa.link.stream):(r.mode&61440)===8192&&(r.La=k.Wa.ub.node,r.Ma=k.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,B(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw k.vb},hb(e,t,r,n){return k.createNode(e,t,r,n)},rename(e,t,r){try{var n=le(t,r)}catch{}if(n){if(B(e.mode))for(var i in n.Na)throw new d(55);pt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=le(e,t),n;for(n in r.Na)throw new d(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=k.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new d(28);return e.link}},Ma:{read(e,t,r,n,i){var a=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&a.subarray)t.set(a.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=a[i+n];return e},write(e,t,r,n,i,a){if(t.buffer===I.buffer&&(a=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}a=i+n;var u=e.Na?e.Na.length:0;if(u>=a||(a=Math.max(a,u*(1048576>u?2:1.125)>>>0),u!=0&&(a=Math.max(a,256)),u=e.Na,e.Na=new Uint8Array(a),0<e.Ra&&e.Na.set(u.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(a=0;a<n;a++)e.Na[i+a]=t[r+a];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new d(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new d(43);if(e=e.node.Na,i&2||!e||e.buffer!==I.buffer){i=!0,n=65536*Math.ceil(t/65536);var a=or(65536,n);if(a&&x.fill(0,a,a+n),n=a,!n)throw new d(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),I.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return k.Ma.write(e,t,0,n,r,!1),0}}},Ct=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},ft=null,Ot={},we=[],Nr=1,ie=null,Wt=!1,Ft=!0,zt={},d=class{name="ErrnoError";constructor(e){this.Pa=e}},jr=class{gb={};node=null;get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Ir=class{La={};Ma={};ab=null;constructor(e,t,r,n){e||=this,this.parent=e,this.Xa=e.Xa,this.id=Nr++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function V(e,t={}){if(!e)throw new d(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(w=>!!w);for(var n=ft,i="/",a=0;a<e.length;a++){var u=a===e.length-1;if(u&&t.parent)break;if(e[a]!==".")if(e[a]==="..")i=Pt(i),n=n.parent;else{i=lt(i+"/"+e[a]);try{n=le(n,e[a])}catch(w){if(w?.Pa===44&&u&&t.Jb)return{path:i};throw w}if(!n.ab||u&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!u||t.$a)){if(!n.La.readlink)throw new d(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=Pt(i)+"/"+n),e=n+"/"+e.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new d(32)}function ht(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function dt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ie.length}function pt(e){var t=dt(e.parent.id,e.name);if(ie[t]===e)ie[t]=e.bb;else for(t=ie[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function le(e,t){var r=B(e.mode)?(r=ve(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new d(r);for(r=ie[dt(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function Bt(e,t,r,n){return e=new Ir(e,t,r,n),t=dt(e.parent.id,e.name),e.bb=ie[t],ie[t]=e}function B(e){return(e&61440)===16384}function Qt(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function ve(e,t){if(Ft)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Ht(e,t){if(!B(e.mode))return 54;try{return le(e,t),20}catch{}return ve(e,"wx")}function Vt(e,t,r){try{var n=le(e,t)}catch(i){return i.Pa}if(e=ve(e,"wx"))return e;if(r){if(!B(n.mode))return 54;if(n===n.parent||ht(n)==="/")return 10}else if(B(n.mode))return 31;return 0}function Ie(e){if(!e)throw new d(63);return e}function z(e){if(e=we[e],!e)throw new d(8);return e}function Xt(e,t=-1){if(e=Object.assign(new jr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!we[t])break e;throw new d(33)}return e.fd=t,we[t]=e}function Lr(e,t=-1){return e=Xt(e,t),e.Ma?.Rb?.(e),e}function mt(e,t,r){var n=e?.Ma.Ua;e=n?e:t,n??=t.La.Ua,Ie(n),n(e,r)}var Cr={open(e){e.Ma=Ot[e.node.rdev].Ma,e.Ma.open?.(e)},Va(){throw new d(70)}};function bt(e,t){Ot[e]={Ma:t}}function Yt(e,t){var r=t==="/";if(r&&ft)throw new d(10);if(!r&&t){var n=V(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new d(10);if(!B(n.mode))throw new d(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?ft=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function Le(e,t,r){var n=V(e,{parent:!0}).node;if(e=je(e),!e)throw new d(28);if(e==="."||e==="..")throw new d(20);var i=Ht(n,e);if(i)throw new d(i);if(!n.La.hb)throw new d(63);return n.La.hb(n,e,t,r)}function Or(e,t=438){return Le(e,t&4095|32768,0)}function Z(e,t=511){return Le(e,t&1023|16384,0)}function Ce(e,t,r){typeof r>"u"&&(r=t,t=438),Le(e,t|8192,r)}function wt(e,t){if(!Rr(e))throw new d(44);var r=V(t,{parent:!0}).node;if(!r)throw new d(44);t=je(t);var n=Ht(r,t);if(n)throw new d(n);if(!r.La.symlink)throw new d(63);r.La.symlink(r,t,e)}function Gt(e){var t=V(e,{parent:!0}).node;e=je(e);var r=le(t,e),n=Vt(t,e,!0);if(n)throw new d(n);if(!t.La.rmdir)throw new d(63);if(r.ab)throw new d(10);t.La.rmdir(t,e),pt(r)}function Jt(e){var t=V(e,{parent:!0}).node;if(!t)throw new d(44);e=je(e);var r=le(t,e),n=Vt(t,e,!1);if(n)throw new d(n);if(!t.La.unlink)throw new d(63);if(r.ab)throw new d(10);t.La.unlink(t,e),pt(r)}function xe(e,t){return e=V(e,{$a:!t}).node,Ie(e.La.Ta)(e)}function Kt(e,t,r,n){mt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function Oe(e,t){e=typeof e=="string"?V(e,{$a:!0}).node:e,Kt(null,e,t)}function Zt(e,t,r){if(B(t.mode))throw new d(31);if((t.mode&61440)!==32768)throw new d(28);var n=ve(t,"w");if(n)throw new d(n);mt(e,t,{size:r,timestamp:Date.now()})}function ge(e,t,r=438){if(e==="")throw new d(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=V(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var a=!1;if(t&64)if(n){if(t&128)throw new d(20)}else{if(i)throw new d(31);n=Le(e,r|511,0),a=!0}if(!n)throw new d(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!B(n.mode))throw new d(54);if(!a&&(i=n?(n.mode&61440)===40960?32:B(n.mode)&&(Qt(t)!=="r"||t&576)?31:ve(n,Qt(t)):44))throw new d(i);return t&512&&!a&&(i=n,i=typeof i=="string"?V(i,{$a:!0}).node:i,Zt(null,i,0)),t&=-131713,i=Xt({node:n,path:ht(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),a&&Oe(n,r&511),!o.logReadFiles||t&1||e in zt||(zt[e]=1),i}function vt(e){if(e.fd===null)throw new d(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{we[e.fd]=null}e.fd=null}function er(e,t,r){if(e.fd===null)throw new d(8);if(!e.seekable||!e.Ma.Va)throw new d(70);if(r!=0&&r!=1&&r!=2)throw new d(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function tr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if((e.flags&2097155)===1)throw new d(8);if(B(e.node.mode))throw new d(31);if(!e.Ma.read)throw new d(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.read(e,t,r,n,i),a||(e.position+=t),t}function rr(e,t,r,n,i){if(0>n||0>i)throw new d(28);if(e.fd===null)throw new d(8);if(!(e.flags&2097155))throw new d(8);if(B(e.node.mode))throw new d(31);if(!e.Ma.write)throw new d(28);e.seekable&&e.flags&1024&&er(e,0,2);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new d(70);return t=e.Ma.write(e,t,r,n,i,void 0),a||(e.position+=t),t}function Wr(e){var t="binary";if(t!=="utf8"&&t!=="binary")throw Error(`Invalid encoding type "${t}"`);var r,n=ge(e,n||0);e=xe(e).size;var i=new Uint8Array(e);return tr(n,i,0,e,0),t==="utf8"?r=R(i):t==="binary"&&(r=i),vt(n),r}function oe(e,t,r){e=lt("/dev/"+e);var n=Ct(!!t,!!r);oe.yb??(oe.yb=64);var i=oe.yb++<<8|0;bt(i,{open(a){a.seekable=!1},close(){r?.buffer?.length&&r(10)},read(a,u,w,q){for(var E=0,T=0;T<q;T++){try{var Q=t()}catch{throw new d(29)}if(Q===void 0&&E===0)throw new d(6);if(Q==null)break;E++,u[w+T]=Q}return E&&(a.node.atime=Date.now()),E},write(a,u,w,q){for(var E=0;E<q;E++)try{r(u[w+E])}catch{throw new d(29)}return q&&(a.node.mtime=a.node.ctime=Date.now()),E}}),Ce(e,n,i)}var U={};function ce(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":z(e).path,t.length==0){if(!r)throw new d(44);return e}return e+"/"+t}function We(e,t){S[e>>2]=t.dev,S[e+4>>2]=t.mode,j[e+8>>2]=t.nlink,S[e+12>>2]=t.uid,S[e+16>>2]=t.gid,S[e+20>>2]=t.rdev,G[e+24>>3]=BigInt(t.size),S[e+32>>2]=4096,S[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return G[e+40>>3]=BigInt(Math.floor(r/1e3)),j[e+48>>2]=r%1e3*1e6,G[e+56>>3]=BigInt(Math.floor(n/1e3)),j[e+64>>2]=n%1e3*1e6,G[e+72>>3]=BigInt(Math.floor(i/1e3)),j[e+80>>2]=i%1e3*1e6,G[e+88>>3]=BigInt(t.ino),0}var Fe=void 0,ze=()=>{var e=S[+Fe>>2];return Fe+=4,e},gt=0,Fr=[0,31,60,91,121,152,182,213,244,274,305,335],zr=[0,31,59,90,120,151,181,212,243,273,304,334],Ae={},nr=e=>{rt=e,at||0<gt||(o.onExit?.(e),Pe=!0),D(e,new st(e))},Br=e=>{if(!Pe)try{if(e(),!(at||0<gt))try{rt=e=rt,nr(e)}catch(t){t instanceof st||t=="unwind"||D(1,t)}}catch(t){t instanceof st||t=="unwind"||D(1,t)}},yt={},ir=()=>{if(!_t){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:W||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);_t=r}return _t},_t,kt=e=>{var t=qe(e)+1,r=ae(t);return te(e,x,r,t),r},Qr=(e,t,r,n)=>{var i={string:E=>{var T=0;return E!=null&&E!==0&&(T=kt(E)),T},array:E=>{var T=ae(E.length);return I.set(E,T),T}};e=o["_"+e];var a=[],u=0;if(n)for(var w=0;w<n.length;w++){var q=i[r[w]];q?(u===0&&(u=$e()),a[w]=q(n[w])):a[w]=n[w]}return r=e(...a),r=function(E){return u!==0&&Me(u),t==="string"?E?R(x,E):"":t==="boolean"?!!E:E}(r)},Be=0,Qe=(e,t)=>(t=t==1?ae(e.length):qt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),x.set(e,t),t),fe,Et=[],re,se=e=>{fe.delete(re.get(e)),re.set(e,null),Et.push(e)},Se=(e,t)=>{if(!fe){fe=new WeakMap;var r=re.length;if(fe)for(var n=0;n<0+r;n++){var i=re.get(n);i&&fe.set(i,n)}}if(r=fe.get(e)||0)return r;if(Et.length)r=Et.pop();else{try{re.grow(1)}catch(q){throw q instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":q}r=re.length-1}try{re.set(r,e)}catch(q){if(!(q instanceof TypeError))throw q;if(typeof WebAssembly.Function=="function"){var a=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var u=1;u<t.length;++u)i.parameters.push(n[t[u]]);t=new a(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),u={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var w=t.length;128>w?n.push(w):n.push(w%128|128,w>>7);for(a of t)n.push(u[a]);i=="v"?n.push(0):n.push(1,u[i]),t=[0,97,115,109,1,0,0,0,1],a=n.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}re.set(r,t)}return fe.set(e,r),r};ie=Array(4096),Yt(k,"/"),Z("/tmp"),Z("/home"),Z("/home/web_user"),function(){Z("/dev"),bt(259,{read:()=>0,write:(n,i,a,u)=>u,Va:()=>0}),Ce("/dev/null",259),Lt(1280,Tr),Lt(1536,Pr),Ce("/dev/tty",1280),Ce("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(Nt(e),t=e.byteLength),e[--t]);oe("random",r),oe("urandom",r),Z("/dev/shm"),Z("/dev/shm/tmp")}(),function(){Z("/proc");var e=Z("/proc/self");Z("/proc/self/fd"),Yt({Xa(){var t=Bt(e,"fd",16895,73);return t.Ma={Va:k.Ma.Va},t.La={lookup(r,n){r=+n;var i=z(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(we.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),k.vb=new d(44),k.vb.stack="<generic error, no stack>";var Hr={a:(e,t,r,n)=>be(`Assertion failed: ${e?R(x,e):""}, at: `+[t?t?R(x,t):"":"unknown filename",r,n?n?R(x,n):"":"unknown function"]),i:function(e,t){try{return e=e?R(x,e):"",Oe(e,t),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?R(x,t):"",t=ce(e,t),r&-8)return-28;var n=V(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&ve(n,e)?-2:0):-44}catch(i){if(typeof U>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=z(e);return Kt(r,r.node,t,!1),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=z(e);return mt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){Fe=r;try{var n=z(e);switch(t){case 0:var i=ze();if(0>i)break;for(;we[i];)i++;return Lr(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=ze(),n.flags|=i,0;case 12:return i=ze(),_e[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},g:function(e,t){try{var r=z(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??=n.La.Ta,Ie(i);var a=i(e);return We(t,a)}catch(u){if(typeof U>"u"||u.name!=="ErrnoError")throw u;return-u.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=z(e);if(0>t||!(r.flags&2097155))throw new d(28);return Zt(r,r.node,t),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=qe("/")+1;return t<r?-68:(te("/",x,e,t),r)}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?R(x,e):"",We(t,xe(e,!0))}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?R(x,t):"",t=ce(e,t),Z(t,r),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?R(x,t):"";var i=n&256;return t=ce(e,t,n&4096),We(r,i?xe(t,!0):xe(t))}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},x:function(e,t,r,n){Fe=n;try{t=t?R(x,t):"",t=ce(e,t);var i=n?ze():0;return ge(t,r,i).fd}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},v:function(e,t,r,n){try{if(t=t?R(x,t):"",t=ce(e,t),0>=n)return-28;var i=V(t).node;if(!i)throw new d(44);if(!i.La.readlink)throw new d(28);var a=i.La.readlink(i),u=Math.min(n,qe(a)),w=I[r+u];return te(a,x,r,n+1),I[r+u]=w,u}catch(q){if(typeof U>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},u:function(e){try{return e=e?R(x,e):"",Gt(e),0}catch(t){if(typeof U>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?R(x,e):"",We(t,xe(e))}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?R(x,t):"",t=ce(e,t),r===0?Jt(t):r===512?Gt(t):be("Invalid flags passed to unlinkat"),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?R(x,t):"",t=ce(e,t,!0);var n=Date.now(),i,a;if(r){var u=j[r>>2]+4294967296*S[r+4>>2],w=S[r+8>>2];w==1073741823?i=n:w==1073741822?i=null:i=1e3*u+w/1e6,r+=16,u=j[r>>2]+4294967296*S[r+4>>2],w=S[r+8>>2],w==1073741823?a=n:w==1073741822?a=null:a=1e3*u+w/1e6}else a=i=n;if((a??i)!==null){e=i;var q=V(t,{$a:!0}).node;Ie(q.La.Ua)(q,{atime:e,mtime:a})}return 0}catch(E){if(typeof U>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},m:()=>be(""),l:()=>{at=!1,gt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),S[t>>2]=e.getSeconds(),S[t+4>>2]=e.getMinutes(),S[t+8>>2]=e.getHours(),S[t+12>>2]=e.getDate(),S[t+16>>2]=e.getMonth(),S[t+20>>2]=e.getFullYear()-1900,S[t+24>>2]=e.getDay();var r=e.getFullYear();S[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?zr:Fr)[e.getMonth()]+e.getDate()-1|0,S[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();S[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,a,u){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var w=z(n);if(t&2&&!(r&2)&&(w.flags&2097155)!==2)throw new d(2);if((w.flags&2097155)===1)throw new d(2);if(!w.Ma.ib)throw new d(43);if(!e)throw new d(28);var q=w.Ma.ib(w,e,i,t,r),E=q.Kb;return S[a>>2]=q.Ab,j[u>>2]=E,0}catch(T){if(typeof U>"u"||T.name!=="ErrnoError")throw T;return-T.Pa}},z:function(e,t,r,n,i,a){a=-9007199254740992>a||9007199254740992<a?NaN:Number(a);try{var u=z(i);if(r&2){if(r=a,(u.node.mode&61440)!==32768)throw new d(43);if(!(n&2)){var w=x.slice(e,e+t);u.Ma.jb&&u.Ma.jb(u,w,r,t,n)}}}catch(q){if(typeof U>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},n:(e,t)=>{if(Ae[e]&&(clearTimeout(Ae[e].id),delete Ae[e]),!t)return 0;var r=setTimeout(()=>{delete Ae[e],Br(()=>sr(e,performance.now()))},t);return Ae[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),a=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),j[e>>2]=60*Math.max(a,i),S[t>>2]=+(a!=i),t=u=>{var w=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(a),t=t(i),i<a?(te(e,x,r,17),te(t,x,n,17)):(te(e,x,n,17),te(t,x,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=x.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-Te.buffer.byteLength+65535)/65536|0;try{Te.grow(n),Mt();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return ir().forEach((n,i)=>{var a=t+r;for(i=j[e+4*i>>2]=a,a=0;a<n.length;++a)I[i++]=n.charCodeAt(a);I[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=ir();j[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),j[t>>2]=n,0},e:function(e){try{var t=z(e);return vt(t),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=z(e);return I[t]=r.tty?2:B(r.mode)?3:(r.mode&61440)===40960?7:4,_e[t+2>>1]=0,G[t+8>>3]=BigInt(0),G[t+16>>3]=BigInt(0),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=z(e);e=t;for(var a,u=t=0;u<r;u++){var w=j[e>>2],q=j[e+4>>2];e+=8;var E=tr(i,I,w,q,a);if(0>E){var T=-1;break e}if(t+=E,E<q)break;typeof a<"u"&&(a+=E)}T=t}return j[n>>2]=T,0}catch(Q){if(typeof U>"u"||Q.name!=="ErrnoError")throw Q;return Q.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=z(e);return er(i,t,r),G[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},I:function(e){try{var t=z(e);return t.Ma?.fsync?t.Ma.fsync(t):0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},t:function(e,t,r,n){try{e:{var i=z(e);e=t;for(var a,u=t=0;u<r;u++){var w=j[e>>2],q=j[e+4>>2];e+=8;var E=rr(i,I,w,q,a);if(0>E){var T=-1;break e}if(t+=E,E<q)break;typeof a<"u"&&(a+=E)}T=t}return j[n>>2]=T,0}catch(Q){if(typeof U>"u"||Q.name!=="ErrnoError")throw Q;return Q.Pa}},k:nr},m;(async function(){function e(r){return m=r.exports,Te=m.M,Mt(),re=m.O,ue--,o.monitorRunDependencies?.(ue),ue==0&&ke&&(r=ke,ke=null,r()),m}ue++,o.monitorRunDependencies?.(ue);var t={a:Hr};return o.instantiateWasm?new Promise(r=>{o.instantiateWasm(t,(n,i)=>{e(n,i),r(n.exports)})}):(ot??=o.locateFile?o.locateFile("sql-wasm.wasm",F):F+"sql-wasm.wasm",e((await Mr(t)).instance))})(),o._sqlite3_free=e=>(o._sqlite3_free=m.P)(e),o._sqlite3_value_text=e=>(o._sqlite3_value_text=m.Q)(e),o._sqlite3_prepare_v2=(e,t,r,n,i)=>(o._sqlite3_prepare_v2=m.R)(e,t,r,n,i),o._sqlite3_step=e=>(o._sqlite3_step=m.S)(e),o._sqlite3_reset=e=>(o._sqlite3_reset=m.T)(e),o._sqlite3_exec=(e,t,r,n,i)=>(o._sqlite3_exec=m.U)(e,t,r,n,i),o._sqlite3_finalize=e=>(o._sqlite3_finalize=m.V)(e),o._sqlite3_column_name=(e,t)=>(o._sqlite3_column_name=m.W)(e,t),o._sqlite3_column_text=(e,t)=>(o._sqlite3_column_text=m.X)(e,t),o._sqlite3_column_type=(e,t)=>(o._sqlite3_column_type=m.Y)(e,t),o._sqlite3_errmsg=e=>(o._sqlite3_errmsg=m.Z)(e),o._sqlite3_clear_bindings=e=>(o._sqlite3_clear_bindings=m._)(e),o._sqlite3_value_blob=e=>(o._sqlite3_value_blob=m.$)(e),o._sqlite3_value_bytes=e=>(o._sqlite3_value_bytes=m.aa)(e),o._sqlite3_value_double=e=>(o._sqlite3_value_double=m.ba)(e),o._sqlite3_value_int=e=>(o._sqlite3_value_int=m.ca)(e),o._sqlite3_value_type=e=>(o._sqlite3_value_type=m.da)(e),o._sqlite3_result_blob=(e,t,r,n)=>(o._sqlite3_result_blob=m.ea)(e,t,r,n),o._sqlite3_result_double=(e,t)=>(o._sqlite3_result_double=m.fa)(e,t),o._sqlite3_result_error=(e,t,r)=>(o._sqlite3_result_error=m.ga)(e,t,r),o._sqlite3_result_int=(e,t)=>(o._sqlite3_result_int=m.ha)(e,t),o._sqlite3_result_int64=(e,t)=>(o._sqlite3_result_int64=m.ia)(e,t),o._sqlite3_result_null=e=>(o._sqlite3_result_null=m.ja)(e),o._sqlite3_result_text=(e,t,r,n)=>(o._sqlite3_result_text=m.ka)(e,t,r,n),o._sqlite3_aggregate_context=(e,t)=>(o._sqlite3_aggregate_context=m.la)(e,t),o._sqlite3_column_count=e=>(o._sqlite3_column_count=m.ma)(e),o._sqlite3_data_count=e=>(o._sqlite3_data_count=m.na)(e),o._sqlite3_column_blob=(e,t)=>(o._sqlite3_column_blob=m.oa)(e,t),o._sqlite3_column_bytes=(e,t)=>(o._sqlite3_column_bytes=m.pa)(e,t),o._sqlite3_column_double=(e,t)=>(o._sqlite3_column_double=m.qa)(e,t),o._sqlite3_bind_blob=(e,t,r,n,i)=>(o._sqlite3_bind_blob=m.ra)(e,t,r,n,i),o._sqlite3_bind_double=(e,t,r)=>(o._sqlite3_bind_double=m.sa)(e,t,r),o._sqlite3_bind_int=(e,t,r)=>(o._sqlite3_bind_int=m.ta)(e,t,r),o._sqlite3_bind_text=(e,t,r,n,i)=>(o._sqlite3_bind_text=m.ua)(e,t,r,n,i),o._sqlite3_bind_parameter_index=(e,t)=>(o._sqlite3_bind_parameter_index=m.va)(e,t),o._sqlite3_sql=e=>(o._sqlite3_sql=m.wa)(e),o._sqlite3_normalized_sql=e=>(o._sqlite3_normalized_sql=m.xa)(e),o._sqlite3_changes=e=>(o._sqlite3_changes=m.ya)(e),o._sqlite3_close_v2=e=>(o._sqlite3_close_v2=m.za)(e),o._sqlite3_create_function_v2=(e,t,r,n,i,a,u,w,q)=>(o._sqlite3_create_function_v2=m.Aa)(e,t,r,n,i,a,u,w,q),o._sqlite3_update_hook=(e,t,r)=>(o._sqlite3_update_hook=m.Ba)(e,t,r),o._sqlite3_open=(e,t)=>(o._sqlite3_open=m.Ca)(e,t);var qt=o._malloc=e=>(qt=o._malloc=m.Da)(e),He=o._free=e=>(He=o._free=m.Ea)(e);o._RegisterExtensionFunctions=e=>(o._RegisterExtensionFunctions=m.Fa)(e);var or=(e,t)=>(or=m.Ga)(e,t),sr=(e,t)=>(sr=m.Ha)(e,t),Me=e=>(Me=m.Ia)(e),ae=e=>(ae=m.Ja)(e),$e=()=>($e=m.Ka)();o.stackSave=()=>$e(),o.stackRestore=e=>Me(e),o.stackAlloc=e=>ae(e),o.cwrap=(e,t,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return t!=="string"&&i&&!n?o["_"+e]:(...a)=>Qr(e,t,r,a)},o.addFunction=Se,o.removeFunction=se,o.UTF8ToString=ut,o.ALLOC_NORMAL=Be,o.allocate=Qe,o.allocateUTF8OnStack=kt;function xt(){function e(){if(o.calledRun=!0,!Pe){if(!o.noFSInit&&!Wt){var t,r;Wt=!0,n??=o.stdin,t??=o.stdout,r??=o.stderr,n?oe("stdin",n):wt("/dev/tty","/dev/stdin"),t?oe("stdout",null,t):wt("/dev/tty","/dev/stdout"),r?oe("stderr",null,r):wt("/dev/tty1","/dev/stderr"),ge("/dev/stdin",0),ge("/dev/stdout",1),ge("/dev/stderr",1)}if(m.N(),Ft=!1,o.onRuntimeInitialized?.(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var n=o.postRun.shift();Ut.unshift(n)}$t(Ut)}}if(0<ue)ke=xt;else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)$r();$t(Rt),0<ue?ke=xt:o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),e()},1)):e()}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return xt(),b}),Ye)};typeof Je=="object"&&typeof de=="object"?(de.exports=Ge,de.exports.default=Ge):typeof define=="function"&&define.amd?define([],function(){return Ge}):typeof Je=="object"&&(Je.Module=Ge)});var On={};Sn(On,{activate:()=>$n,deactivate:()=>Cn});module.exports=Mn(On);var P=Ue(require("vscode")),Y=Ue(require("fs")),M=Ue(require("path")),yr=Ue(require("https")),_r=Ue(wr()),Ke=null,N,Re;function $n(f){console.log("Cursor Usage Tracker \u5DF2\u6FC0\u6D3B"),N=P.window.createStatusBarItem(P.StatusBarAlignment.Right,100),N.command="cursor-usage-tracker.showDetails",N.tooltip="\u70B9\u51FB\u67E5\u770B Cursor \u914D\u989D\u8BE6\u60C5",f.subscriptions.push(N);let c=P.commands.registerCommand("cursor-usage-tracker.refresh",()=>et());f.subscriptions.push(c);let h=P.commands.registerCommand("cursor-usage-tracker.showDetails",()=>In());f.subscriptions.push(h);let b=P.commands.registerCommand("cursor-usage-tracker.showLogs",()=>{ye||(ye=P.window.createOutputChannel("Cursor Usage Tracker")),ye.show()});f.subscriptions.push(b),et(),vr(),P.workspace.onDidChangeConfiguration(_=>{_.affectsConfiguration("cursorUsageTracker")&&vr()})}function vr(){Re&&clearInterval(Re);let c=P.workspace.getConfiguration("cursorUsageTracker").get("refreshInterval",300)*1e3;Re=setInterval(()=>{et()},c)}var ye;function v(f){ye||(ye=P.window.createOutputChannel("Cursor Usage Tracker"));let c=new Date().toLocaleTimeString();ye.appendLine(`[${c}] ${f}`),console.log(`[Cursor Usage Tracker] ${f}`)}async function Un(){let f=Rn();v(`\u5F00\u59CB\u641C\u7D22\u7528\u6237 ID\uFF0C\u5171 ${f.length} \u4E2A\u5019\u9009\u8DEF\u5F84`);for(let c of f)try{v(`\u5C1D\u8BD5\u8DEF\u5F84: ${c}`);let h=await kr(c);if(h)return v(`\u2713 \u6210\u529F\u627E\u5230\u7528\u6237 ID: ${h}`),h;v("  - \u672A\u5728\u6B64\u8DEF\u5F84\u627E\u5230\u7528\u6237 ID")}catch(h){v(`  - \u8BFB\u53D6\u5931\u8D25: ${h}`)}return v("\u2717 \u6240\u6709\u8DEF\u5F84\u90FD\u672A\u627E\u5230\u7528\u6237 ID"),null}function Rn(){let f=[],c=process.env.HOME||process.env.USERPROFILE||"";if(process.platform==="win32"){let h=process.env.APPDATA||M.join(c,"AppData","Roaming");f.push(M.join(h,"Cursor","sentry","scope_v3.json"),M.join(h,"Cursor","sentry","session.json"),M.join(h,"Cursor","User","globalStorage","storage.json"),M.join(h,"Cursor","storage.json"),M.join(h,"Cursor","User","settings.json"),M.join(c,".cursor","storage.json"),M.join(c,".cursor-tutor","storage.json"))}else process.platform==="darwin"?f.push(M.join(c,"Library","Application Support","Cursor","sentry","scope_v3.json"),M.join(c,"Library","Application Support","Cursor","sentry","session.json"),M.join(c,"Library","Application Support","Cursor","User","globalStorage","storage.json"),M.join(c,"Library","Application Support","Cursor","storage.json"),M.join(c,".cursor","storage.json")):f.push(M.join(c,".config","Cursor","sentry","scope_v3.json"),M.join(c,".config","Cursor","sentry","session.json"),M.join(c,".config","Cursor","User","globalStorage","storage.json"),M.join(c,".config","Cursor","storage.json"),M.join(c,".cursor","storage.json"));return f}async function kr(f){try{if(!Y.existsSync(f)){v(`  - \u6587\u4EF6\u4E0D\u5B58\u5728: ${f}`);let h=M.dirname(f);return Y.existsSync(h)&&Y.statSync(h).isDirectory()?(v(`  - \u5C1D\u8BD5\u641C\u7D22\u76EE\u5F55: ${h}`),await qr(h)):null}v("  - \u6587\u4EF6\u5B58\u5728\uFF0C\u8BFB\u53D6\u5185\u5BB9...");let c=Y.readFileSync(f,"utf8");v(`  - \u6587\u4EF6\u5927\u5C0F: ${c.length} \u5B57\u8282`);try{let h=JSON.parse(c);if(h.scope?.user?.id){v(`  - \u53D1\u73B0 scope.user.id: ${h.scope.user.id}`);let o=gr(h.scope.user.id);if(o)return v(`  - \u63D0\u53D6\u7528\u6237 ID: ${o}`),o}if(h.did){v(`  - \u53D1\u73B0 did: ${h.did}`);let o=gr(h.did);if(o)return v(`  - \u63D0\u53D6\u7528\u6237 ID: ${o}`),o}let b=["cursorAuth/cachedSignInMethod","userId","user_id","id"];for(let o of b)if(h[o]&&typeof h[o]=="string"&&h[o].startsWith("user_"))return v(`  - \u53D1\u73B0 ${o}: ${h[o]}`),h[o];let _=Er(h);return _&&v(`  - \u9012\u5F52\u641C\u7D22\u627E\u5230: ${_}`),_}catch{v("  - JSON \u89E3\u6790\u5931\u8D25\uFF0C\u5C1D\u8BD5\u6B63\u5219\u5339\u914D...");let b=c.match(/user_[a-zA-Z0-9]{20,}/);if(b)return v(`  - \u6B63\u5219\u5339\u914D\u627E\u5230: ${b[0]}`),b[0]}}catch(c){v(`  - \u8BFB\u53D6\u6587\u4EF6\u5931\u8D25: ${c}`)}return null}function gr(f){if(!f||typeof f!="string")return null;if(f.includes("|")){let h=f.split("|").find(b=>b.startsWith("user_"));if(h)return h}return f.startsWith("user_")?f:null}function Er(f){if(!f||typeof f!="object")return null;for(let c in f){let h=f[c];if(typeof h=="string"&&h.startsWith("user_")&&h.length>20)return h;if(typeof h=="object"){let b=Er(h);if(b)return b}}return null}async function qr(f){try{let c=Y.readdirSync(f);for(let h of c){let b=M.join(f,h),_=Y.statSync(b);if(_.isFile()&&(h.endsWith(".json")||h==="storage.json")){let o=await kr(b);if(o)return o}else if(_.isDirectory()&&!h.startsWith(".")){let o=await qr(b);if(o)return o}}}catch(c){console.error(`\u641C\u7D22\u76EE\u5F55\u5931\u8D25: ${f}`,c)}return null}function Dn(){let f=process.env.HOME||process.env.USERPROFILE||"";if(process.platform==="win32"){let c=process.env.APPDATA||M.join(f,"AppData","Roaming");return M.join(c,"Cursor","User","globalStorage","state.vscdb")}else return process.platform==="darwin"?M.join(f,"Library","Application Support","Cursor","User","globalStorage","state.vscdb"):M.join(f,".config","Cursor","User","globalStorage","state.vscdb")}async function Tn(){if(Ke)return v("\u4F7F\u7528\u7F13\u5B58\u7684 accessToken"),Ke;let f=Dn();if(v(`\u5C1D\u8BD5\u8BFB\u53D6\u6570\u636E\u5E93: ${f}`),!Y.existsSync(f))return v(`\u2717 \u6570\u636E\u5E93\u6587\u4EF6\u4E0D\u5B58\u5728: ${f}`),null;try{let c=await(0,_r.default)({locateFile:o=>M.join(__dirname,o)}),h=Y.readFileSync(f),b=new c.Database(h),_=b.exec("SELECT value FROM ItemTable WHERE key = 'cursorAuth/accessToken'");if(_.length>0&&_[0].values.length>0){let o=_[0].values[0][0];return v("\u2713 \u6210\u529F\u83B7\u53D6 accessToken"),Ke=o,b.close(),o}else{v("\u2717 \u672A\u627E\u5230 accessToken");let o=b.exec("SELECT key FROM ItemTable WHERE key LIKE '%cursorAuth%'");return o.length>0&&v(`  - \u627E\u5230\u7684 cursorAuth \u76F8\u5173 key: ${o[0].values.map($=>$[0]).join(", ")}`),b.close(),null}}catch(c){return v(`\u2717 \u8BFB\u53D6\u6570\u636E\u5E93\u5931\u8D25: ${c}`),null}}async function Pn(f){let c=await Tn(),h=c?`${f}%3A%3A${c}`:null,b=(_,o=0)=>new Promise($=>{if(o>5){v("\u2717 \u91CD\u5B9A\u5411\u6B21\u6570\u8FC7\u591A\uFF0C\u505C\u6B62\u8BF7\u6C42"),$(null);return}v(`\u8BF7\u6C42 API: ${_}${o>0?` (\u91CD\u5B9A\u5411 #${o})`:""}`);let L=new URL(_),C={hostname:L.hostname,path:L.pathname+L.search,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",Accept:"application/json"}};h?(v("  - \u4F7F\u7528 Cookie \u8BA4\u8BC1"),C.headers={...C.headers,Cookie:`WorkosCursorSessionToken=${h}`}):v("  - \u65E0\u8BA4\u8BC1\u4FE1\u606F\uFF0C\u5C1D\u8BD5\u65E0\u8BA4\u8BC1\u8BF7\u6C42"),yr.get(C,O=>{if(v(`API \u54CD\u5E94\u72B6\u6001\u7801: ${O.statusCode}`),O.statusCode===401){v("\u2717 \u8BA4\u8BC1\u5931\u8D25 (401)\uFF0C\u6E05\u9664\u7F13\u5B58\u7684 token"),Ke=null,$(null);return}if(O.statusCode&&[301,302,307,308].includes(O.statusCode)){let D=O.headers.location;if(D){v(`  - \u91CD\u5B9A\u5411\u5230: ${D}`);let F=D.startsWith("http")?D:`https://www.cursor.com${D}`;$(b(F,o+1))}else v("\u2717 \u91CD\u5B9A\u5411\u4F46\u6CA1\u6709 Location \u5934"),$(null);return}let W="";O.on("data",D=>{W+=D}),O.on("end",()=>{v(`API \u54CD\u5E94\u6570\u636E\u957F\u5EA6: ${W.length} \u5B57\u8282`);try{let D=JSON.parse(W);D.error?(v(`\u2717 API \u8FD4\u56DE\u9519\u8BEF: ${D.error}`),$(null)):(v("\u2713 API \u8BF7\u6C42\u6210\u529F"),v(`  - GPT-4 \u8BF7\u6C42\u6570: ${D["gpt-4"]?.numRequests||"N/A"}`),v(`  - GPT-4 \u6700\u5927\u8BF7\u6C42\u6570: ${D["gpt-4"]?.maxRequestUsage||"N/A"}`),$(D))}catch(D){v(`\u2717 JSON \u89E3\u6790\u5931\u8D25: ${D}`),v(`  - \u539F\u59CB\u6570\u636E: ${W.substring(0,200)}...`),$(null)}})}).on("error",O=>{v(`\u2717 \u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25: ${O}`),$(null)})});return b(`https://cursor.com/api/usage?user=${f}`)}var Ze=null,xr=null;async function et(){if(v("========== \u5F00\u59CB\u5237\u65B0\u914D\u989D =========="),!P.workspace.getConfiguration("cursorUsageTracker").get("showInStatusBar",!0)){v("\u72B6\u6001\u680F\u663E\u793A\u5DF2\u7981\u7528\uFF0C\u8DF3\u8FC7\u5237\u65B0"),N.hide();return}N.text="$(sync~spin) \u83B7\u53D6\u4E2D...",N.show();try{v("\u6B65\u9AA4 1: \u83B7\u53D6\u7528\u6237 ID...");let h=await Un();if(!h){v("\u2717 \u83B7\u53D6\u7528\u6237 ID \u5931\u8D25"),N.text="$(warning) \u65E0 ID",N.tooltip="\u65E0\u6CD5\u81EA\u52A8\u83B7\u53D6 User ID\uFF0C\u8BF7\u70B9\u51FB\u67E5\u770B\u65E5\u5FD7",N.command="cursor-usage-tracker.showLogs";return}v("\u6B65\u9AA4 2: \u8C03\u7528 API \u83B7\u53D6\u914D\u989D\u6570\u636E..."),xr=h;let b=await Pn(h);if(!b){v("\u2717 API \u8BF7\u6C42\u5931\u8D25"),N.text="$(error) \u5931\u8D25",N.tooltip="\u65E0\u6CD5\u4ECE Cursor API \u83B7\u53D6\u6570\u636E\uFF0C\u8BF7\u70B9\u51FB\u67E5\u770B\u65E5\u5FD7",N.command="cursor-usage-tracker.showLogs";return}v("\u2713 \u914D\u989D\u6570\u636E\u83B7\u53D6\u6210\u529F"),Ze=b,Nn(b),v("========== \u5237\u65B0\u5B8C\u6210 ==========")}catch(h){v(`\u2717 \u5237\u65B0\u8FC7\u7A0B\u53D1\u751F\u5F02\u5E38: ${h}`),N.text="$(error) \u9519\u8BEF"}}function Nn(f){let c=f["gpt-4"];if(c&&c.maxRequestUsage){let h=c.numRequests,b=c.maxRequestUsage,_=b-h,o=Math.round(h/b*100),$="$(check)",L="statusBarItem.warningBackground";o>=90?($="$(flame)",L="statusBarItem.errorBackground"):o>=70?$="$(warning)":($="$(pulse)",L=""),N.text=`${$} ${_}`,N.tooltip=jn(f),o>=70?N.backgroundColor=new P.ThemeColor(L):N.backgroundColor=void 0}else N.text="$(info) Cursor",N.tooltip="\u65E0\u6CD5\u83B7\u53D6\u914D\u989D\u4FE1\u606F";N.show()}function jn(f){let c=new P.MarkdownString;c.isTrusted=!0;let h=f["gpt-4"];if(h){let b=h.numRequests,_=h.maxRequestUsage||"\u221E",o=typeof _=="number"?_-b:"\u221E",$=typeof _=="number"?Math.round(b/_*100):0;c.appendMarkdown(`### \u{1F916} GPT-4 \u914D\u989D
`),c.appendMarkdown(`**${o}** / ${_} \u8BF7\u6C42\u53EF\u7528

`);let L=10,C=Math.round($/100*L),O=L-C,W="\u2588".repeat(C)+"\u2591".repeat(O);c.appendMarkdown(`\`[${W}] ${$}%\`

`),c.appendMarkdown(`--- 
`),c.appendMarkdown(`- **\u5DF2\u7528**: ${b}
`),c.appendMarkdown(`- **Tokens**: ${(h.numTokens/1e6).toFixed(2)}M
`)}if(f.startOfMonth){let b=new Date(f.startOfMonth),_=new Date(b);_.setMonth(_.getMonth()+1);let o=Math.ceil((_.getTime()-Date.now())/(1e3*60*60*24));c.appendMarkdown(`
---
`),c.appendMarkdown(`\u{1F4C5} **${o}\u5929** \u540E\u91CD\u7F6E (${_.toLocaleDateString()})`)}return c.appendMarkdown(`

$(graph) [\u67E5\u770B\u8BE6\u7EC6\u62A5\u544A](command:cursor-usage-tracker.showDetails)`),c}async function In(){if(Ze||await et(),!Ze){P.window.showErrorMessage("\u65E0\u6CD5\u83B7\u53D6 Cursor \u914D\u989D\u4FE1\u606F");return}let f=P.window.createWebviewPanel("cursorUsageReport","Cursor \u914D\u989D\u4EEA\u8868\u76D8",P.ViewColumn.One,{enableScripts:!0});f.webview.html=Ln(Ze,xr||"Unknown")}function Ln(f,c){let h=f["gpt-4"],b=h?.numRequests||0,_=h?.maxRequestUsage||500,o=_-b,$=Math.round(b/_*100),L=h?.numTokens||0,C="#4cc9f0";$>75?C="#f72585":$>50&&(C="#f8961e");let O=new Date(f.startOfMonth),W=new Date(O);W.setMonth(W.getMonth()+1);let D=Math.ceil((W.getTime()-Date.now())/(1e3*60*60*24)),F=80,ne=2*Math.PI*F,pe=ne-$/100*ne;return`<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Usage Dashboard</title>
    <style>
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --text-primary: #f0f6fc;
            --text-secondary: #8b949e;
            --accent-color: ${C};
            --accent-glow: ${C}40;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 40px;
            width: 100%;
            max-width: 480px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .dashboard::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
            background: linear-gradient(90deg, #4cc9f0, #7209b7, #f72585);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title {
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* \u73AF\u5F62\u56FE\u5BB9\u5668 */
        .chart-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 40px;
        }
        
        .chart-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        
        .chart-circle-bg {
            fill: none;
            stroke: rgba(255,255,255,0.05);
            stroke-width: 12;
        }
        
        .chart-circle {
            fill: none;
            stroke: var(--accent-color);
            stroke-width: 12;
            stroke-dasharray: ${ne};
            stroke-dashoffset: ${ne}; /* Initial for animation */
            stroke-linecap: round;
            animation: progress 1.5s ease-out forwards;
            filter: drop-shadow(0 0 8px var(--accent-glow));
        }
        
        .chart-content {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .chart-number {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }
        
        .chart-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        @keyframes progress {
            to { stroke-dashoffset: ${pe}; }
        }

        /* \u7EDF\u8BA1\u6570\u636E\u7F51\u683C */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            transition: transform 0.2s;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
            background: rgba(255,255,255,0.05);
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .stat-name {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .footer-info {
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .reset-badge {
            background: rgba(76, 201, 240, 0.1);
            color: #4cc9f0;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .user-id-container {
            margin-top: 20px;
            text-align: center;
        }
        
        .user-id {
            font-family: monospace;
            font-size: 0.7rem;
            color: #444;
            background: #000;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }

    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <div class="title">GPT-4 Usage</div>
            <div class="subtitle">Monthly Quota Overview</div>
        </div>

        <div class="chart-container">
            <svg class="chart-svg">
                <circle class="chart-circle-bg" cx="100" cy="100" r="${F}"></circle>
                <circle class="chart-circle" cx="100" cy="100" r="${F}"></circle>
            </svg>
            <div class="chart-content">
                <div class="chart-number">${o}</div>
                <div class="chart-label">LEFT</div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">${b} / ${_}</div>
                <div class="stat-name">Requests Used</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">${(L/1e6).toFixed(2)}M</div>
                <div class="stat-name">Tokens Processed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">${$}%</div>
                <div class="stat-name">Consumption</div>
            </div>
             <div class="stat-card">
                <div class="stat-value">${D} Days</div>
                <div class="stat-name">Until Reset</div>
            </div>
        </div>

        <div class="footer-info">
            <span>Next Cycle</span>
            <span class="reset-badge">${W.toLocaleDateString()}</span>
        </div>
        
        <div class="user-id-container">
            <span class="user-id">${c}</span>
        </div>
    </div>
</body>
</html>`}function Cn(){Re&&clearInterval(Re)}0&&(module.exports={activate,deactivate});
