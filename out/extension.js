"use strict";var _n=Object.create;var Ve=Object.defineProperty;var vn=Object.getOwnPropertyDescriptor;var gn=Object.getOwnPropertyNames;var En=Object.getPrototypeOf,qn=Object.prototype.hasOwnProperty;var kn=(p,f)=>()=>(f||p((f={exports:{}}).exports,f),f.exports),An=(p,f)=>{for(var c in f)Ve(p,c,{get:f[c],enumerable:!0})},dr=(p,f,c,y)=>{if(f&&typeof f=="object"||typeof f=="function")for(let k of gn(f))!qn.call(p,k)&&k!==c&&Ve(p,k,{get:()=>f[k],enumerable:!(y=vn(f,k))||y.enumerable});return p};var Re=(p,f,c)=>(c=p!=null?_n(En(p)):{},dr(f||!p||!p.__esModule?Ve(c,"default",{value:p,enumerable:!0}):c,p)),Sn=p=>dr(Ve({},"__esModule",{value:!0}),p);var wr=kn((Ge,he)=>{var Xe=void 0,Ye=function(p){return Xe||(Xe=new Promise(function(f,c){var y=typeof p<"u"?p:{},k=y.onAbort;y.onAbort=function(e){c(new Error(e)),k&&k(e)},y.postRun=y.postRun||[],y.postRun.push(function(){f(y)}),he=void 0;var o;o||=typeof y<"u"?y:{};var P=typeof window=="object",I=typeof WorkerGlobalScope<"u",V=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";o.onRuntimeInitialized=function(){function e(s,l){switch(typeof l){case"boolean":bn(s,l?1:0);break;case"number":mn(s,l);break;case"string":dn(s,l,-1,-1);break;case"object":if(l===null)cr(s);else if(l.length!=null){var m=ze(l,Be);wn(s,m,l.length,-1),Qe(m)}else He(s,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:cr(s)}}function t(s,l){for(var m=[],_=0;_<s;_+=1){var v=ee(l+4*_,"i32"),S=ln(v);if(S===1||S===2)v=pn(v);else if(S===3)v=cn(v);else if(S===4){S=v,v=fn(S),S=hn(S);for(var G=new Uint8Array(v),Q=0;Q<v;Q+=1)G[Q]=D[S+Q];v=G}else v=null;m.push(v)}return m}function r(s,l){this.Qa=s,this.db=l,this.Oa=1,this.lb=[]}function n(s,l){if(this.db=l,l=Ee(s)+1,this.eb=Et(l),this.eb===null)throw Error("Unable to allocate memory for the SQL string");te(s,A,this.eb,l),this.kb=this.eb,this.Za=this.pb=null}function i(s){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),s!=null){var l=this.filename,m="/",_=l;if(m&&(m=typeof m=="string"?m:ft(m),_=l?at(m+"/"+l):m),l=It(!0,!0),_=Ir(_,l),s){if(typeof s=="string"){m=Array(s.length);for(var v=0,S=s.length;v<S;++v)m[v]=s.charCodeAt(v);s=m}Oe(_,l|146),m=be(_,577),tr(m,s,0,s.length,0),wt(m),Oe(_,l)}}this.handleError(w(this.filename,a)),this.db=ee(a,"i32"),pr(this.db),this.fb={},this.Sa={}}var a=se(4),u=o.cwrap,w=u("sqlite3_open","number",["string","number"]),q=u("sqlite3_close_v2","number",["number"]),E=u("sqlite3_exec","number",["number","string","number","number","number"]),x=u("sqlite3_changes","number",["number"]),F=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),sr=u("sqlite3_sql","string",["number"]),Qr=u("sqlite3_normalized_sql","string",["number"]),ar=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Hr=u("sqlite3_bind_text","number",["number","number","number","number","number"]),ur=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),Vr=u("sqlite3_bind_double","number",["number","number","number"]),Xr=u("sqlite3_bind_int","number",["number","number","number"]),Yr=u("sqlite3_bind_parameter_index","number",["number","string"]),Gr=u("sqlite3_step","number",["number"]),Jr=u("sqlite3_errmsg","string",["number"]),Kr=u("sqlite3_column_count","number",["number"]),Zr=u("sqlite3_data_count","number",["number"]),en=u("sqlite3_column_double","number",["number","number"]),lr=u("sqlite3_column_text","string",["number","number"]),tn=u("sqlite3_column_blob","number",["number","number"]),rn=u("sqlite3_column_bytes","number",["number","number"]),nn=u("sqlite3_column_type","number",["number","number"]),on=u("sqlite3_column_name","string",["number","number"]),sn=u("sqlite3_reset","number",["number"]),an=u("sqlite3_clear_bindings","number",["number"]),un=u("sqlite3_finalize","number",["number"]),fr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),ln=u("sqlite3_value_type","number",["number"]),fn=u("sqlite3_value_bytes","number",["number"]),cn=u("sqlite3_value_text","string",["number"]),hn=u("sqlite3_value_blob","number",["number"]),pn=u("sqlite3_value_double","number",["number"]),mn=u("sqlite3_result_double","",["number","number"]),cr=u("sqlite3_result_null","",["number"]),dn=u("sqlite3_result_text","",["number","string","number","number"]),wn=u("sqlite3_result_blob","",["number","number","number","number"]),bn=u("sqlite3_result_int","",["number","number"]),He=u("sqlite3_result_error","",["number","string","number"]),hr=u("sqlite3_aggregate_context","number",["number","number"]),pr=u("RegisterExtensionFunctions","number",["number"]),mr=u("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(s){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(s)?this.Cb(s):s!=null&&typeof s=="object"?this.Db(s):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var s=Gr(this.Qa);switch(s){case 100:return!0;case 101:return!1;default:throw this.db.handleError(s)}},r.prototype.wb=function(s){return s==null&&(s=this.Oa,this.Oa+=1),en(this.Qa,s)},r.prototype.Gb=function(s){if(s==null&&(s=this.Oa,this.Oa+=1),s=lr(this.Qa,s),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(s)},r.prototype.Hb=function(s){return s==null&&(s=this.Oa,this.Oa+=1),lr(this.Qa,s)},r.prototype.getBlob=function(s){s==null&&(s=this.Oa,this.Oa+=1);var l=rn(this.Qa,s);s=tn(this.Qa,s);for(var m=new Uint8Array(l),_=0;_<l;_+=1)m[_]=D[s+_];return m},r.prototype.get=function(s,l){l=l||{},s!=null&&this.bind(s)&&this.step(),s=[];for(var m=Zr(this.Qa),_=0;_<m;_+=1)switch(nn(this.Qa,_)){case 1:var v=l.useBigInt?this.Gb(_):this.wb(_);s.push(v);break;case 2:s.push(this.wb(_));break;case 3:s.push(this.Hb(_));break;case 4:s.push(this.getBlob(_));break;default:s.push(null)}return s},r.prototype.getColumnNames=function(){for(var s=[],l=Kr(this.Qa),m=0;m<l;m+=1)s.push(on(this.Qa,m));return s},r.prototype.getAsObject=function(s,l){s=this.get(s,l),l=this.getColumnNames();for(var m={},_=0;_<l.length;_+=1)m[l[_]]=s[_];return m},r.prototype.getSQL=function(){return sr(this.Qa)},r.prototype.getNormalizedSQL=function(){return Qr(this.Qa)},r.prototype.run=function(s){return s!=null&&this.bind(s),this.step(),this.reset()},r.prototype.sb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1),s=jt(s);var m=ze(s,Be);this.lb.push(m),this.db.handleError(Hr(this.Qa,l,m,s.length-1,0))},r.prototype.Bb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1);var m=ze(s,Be);this.lb.push(m),this.db.handleError(ur(this.Qa,l,m,s.length,0))},r.prototype.rb=function(s,l){l==null&&(l=this.Oa,this.Oa+=1),this.db.handleError((s===(s|0)?Xr:Vr)(this.Qa,l,s))},r.prototype.Eb=function(s){s==null&&(s=this.Oa,this.Oa+=1),ur(this.Qa,s,0,0,0)},r.prototype.tb=function(s,l){switch(l==null&&(l=this.Oa,this.Oa+=1),typeof s){case"string":this.sb(s,l);return;case"number":this.rb(s,l);return;case"bigint":this.sb(s.toString(),l);return;case"boolean":this.rb(s+0,l);return;case"object":if(s===null){this.Eb(l);return}if(s.length!=null){this.Bb(s,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+s+")."},r.prototype.Db=function(s){var l=this;return Object.keys(s).forEach(function(m){var _=Yr(l.Qa,m);_!==0&&l.tb(s[m],_)}),!0},r.prototype.Cb=function(s){for(var l=0;l<s.length;l+=1)this.tb(s[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),an(this.Qa)===0&&sn(this.Qa)===0},r.prototype.freemem=function(){for(var s;(s=this.lb.pop())!==void 0;)Qe(s)},r.prototype.free=function(){this.freemem();var s=un(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,s},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var s=Me(),l=se(4);ge(a),ge(l);try{this.db.handleError(ar(this.db.db,this.kb,-1,a,l)),this.kb=ee(l,"i32");var m=ee(a,"i32");return m===0?(this.mb(),{done:!0}):(this.Za=new r(m,this.db),this.db.fb[m]=this.Za,{value:this.Za,done:!1})}catch(_){throw this.pb=st(this.kb),this.mb(),_}finally{Se(s)}},n.prototype.mb=function(){Qe(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:st(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(s,l){if(!this.db)throw"Database closed";if(l){s=this.prepare(s,l);try{s.step()}finally{s.free()}}else this.handleError(E(this.db,s,0,0,a));return this},i.prototype.exec=function(s,l,m){if(!this.db)throw"Database closed";var _=Me(),v=null;try{var S=vt(s),G=se(4);for(s=[];ee(S,"i8")!==0;){ge(a),ge(G),this.handleError(ar(this.db,S,-1,a,G));var Q=ee(a,"i32");if(S=ee(G,"i32"),Q!==0){var B=null;for(v=new r(Q,this),l!=null&&v.bind(l);v.step();)B===null&&(B={columns:v.getColumnNames(),values:[]},s.push(B)),B.values.push(v.get(null,m));v.free()}}return s}catch(J){throw v&&v.free(),J}finally{Se(_)}},i.prototype.each=function(s,l,m,_,v){typeof l=="function"&&(_=m,m=l,l=void 0),s=this.prepare(s,l);try{for(;s.step();)m(s.getAsObject(null,v))}finally{s.free()}if(typeof _=="function")return _()},i.prototype.prepare=function(s,l){if(ge(a),this.handleError(F(this.db,s,-1,a,0)),s=ee(a,"i32"),s===0)throw"Nothing to prepare";var m=new r(s,this);return l!=null&&m.bind(l),this.fb[s]=m},i.prototype.iterateStatements=function(s){return new n(s,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(l){l.free()}),Object.values(this.Sa).forEach(oe),this.Sa={},this.handleError(q(this.db));var s=Or(this.filename);return this.handleError(w(this.filename,a)),this.db=ee(a,"i32"),pr(this.db),s},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(s){s.free()}),Object.values(this.Sa).forEach(oe),this.Sa={},this.Ya&&(oe(this.Ya),this.Ya=void 0),this.handleError(q(this.db)),Gt("/"+this.filename),this.db=null)},i.prototype.handleError=function(s){if(s===0)return null;throw s=Jr(this.db),Error(s)},i.prototype.getRowsModified=function(){return x(this.db)},i.prototype.create_function=function(s,l){Object.prototype.hasOwnProperty.call(this.Sa,s)&&(oe(this.Sa[s]),delete this.Sa[s]);var m=Ae(function(_,v,S){v=t(v,S);try{var G=l.apply(null,v)}catch(Q){He(_,Q,-1);return}e(_,G)},"viii");return this.Sa[s]=m,this.handleError(fr(this.db,s,l.length,1,0,m,0,0,0)),this},i.prototype.create_aggregate=function(s,l){var m=l.init||function(){return null},_=l.finalize||function(B){return B},v=l.step;if(!v)throw"An aggregate function must have a step function in "+s;var S={};Object.hasOwnProperty.call(this.Sa,s)&&(oe(this.Sa[s]),delete this.Sa[s]),l=s+"__finalize",Object.hasOwnProperty.call(this.Sa,l)&&(oe(this.Sa[l]),delete this.Sa[l]);var G=Ae(function(B,J,kt){var ce=hr(B,1);Object.hasOwnProperty.call(S,ce)||(S[ce]=m()),J=t(J,kt),J=[S[ce]].concat(J);try{S[ce]=v.apply(null,J)}catch(yn){delete S[ce],He(B,yn,-1)}},"viii"),Q=Ae(function(B){var J=hr(B,1);try{var kt=_(S[J])}catch(ce){delete S[J],He(B,ce,-1);return}e(B,kt),delete S[J]},"vi");return this.Sa[s]=G,this.Sa[l]=Q,this.handleError(fr(this.db,s,v.length-1,1,0,0,G,Q,0)),this},i.prototype.updateHook=function(s){this.Ya&&(mr(this.db,0,0),oe(this.Ya),this.Ya=void 0),s&&(this.Ya=Ae(function(l,m,_,v,S){switch(m){case 18:l="insert";break;case 23:l="update";break;case 9:l="delete";break;default:throw"unknown operationCode in updateHook callback: "+m}if(_=_?$(A,_):"",v=v?$(A,v):"",S>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";s(l,_,v,Number(S))},"viiiij"),mr(this.db,this.Ya,0))},o.Database=i};var C={...o},K="./this.program",N=(e,t)=>{throw t},X="",Ke,$e;if(V){var Ze=require("fs");require("path"),X=__dirname+"/",$e=e=>(e=Te(e)?new URL(e):e,Ze.readFileSync(e)),Ke=async e=>(e=Te(e)?new URL(e):e,Ze.readFileSync(e,void 0)),!o.thisProgram&&1<process.argv.length&&(K=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof he<"u"&&(he.exports=o),N=(e,t)=>{throw process.exitCode=e,t}}else(P||I)&&(I?X=self.location.href:typeof document<"u"&&document.currentScript&&(X=document.currentScript.src),X=X.startsWith("blob:")?"":X.slice(0,X.replace(/[?#].*/,"").lastIndexOf("/")+1),I&&($e=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ke=async e=>{if(Te(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var St=o.print||console.log.bind(console),pe=o.printErr||console.error.bind(console);Object.assign(o,C),C=null,o.thisProgram&&(K=o.thisProgram);var xe=o.wasmBinary,Pe,Ne=!1,et,D,A,_e,M,T,tt,Y,rt,Te=e=>e.startsWith("file://");function Mt(){var e=Pe.buffer;o.HEAP8=D=new Int8Array(e),o.HEAP16=_e=new Int16Array(e),o.HEAPU8=A=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAP32=M=new Int32Array(e),o.HEAPU32=T=new Uint32Array(e),o.HEAPF32=tt=new Float32Array(e),o.HEAPF64=rt=new Float64Array(e),o.HEAP64=Y=new BigInt64Array(e),o.HEAPU64=new BigUint64Array(e)}var ae=0,ve=null;function me(e){throw o.onAbort?.(e),e="Aborted("+e+")",pe(e),Ne=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var nt;async function kr(e){if(!xe)try{var t=await Ke(e);return new Uint8Array(t)}catch{}if(e==nt&&xe)e=new Uint8Array(xe);else if($e)e=$e(e);else throw"both async and sync fetching of the wasm failed";return e}async function Ar(e,t){try{var r=await kr(e);return await WebAssembly.instantiate(r,t)}catch(n){pe(`failed to asynchronously prepare wasm: ${n}`),me(n)}}async function Sr(e){var t=nt;if(!xe&&typeof WebAssembly.instantiateStreaming=="function"&&!Te(t)&&!V)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){pe(`wasm streaming compile failed: ${n}`),pe("falling back to ArrayBuffer instantiation")}return Ar(t,e)}class it{name="ExitStatus";constructor(t){this.message=`Program terminated with exit(${t})`,this.status=t}}var Rt=e=>{for(;0<e.length;)e.shift()(o)},Ut=[],$t=[],Mr=()=>{var e=o.preRun.shift();$t.unshift(e)};function ee(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return D[e];case"i8":return D[e];case"i16":return _e[e>>1];case"i32":return M[e>>2];case"i64":return Y[e>>3];case"float":return tt[e>>2];case"double":return rt[e>>3];case"*":return T[e>>2];default:me(`invalid type for getValue: ${t}`)}}var ot=o.noExitRuntime||!0;function ge(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":D[e]=0;break;case"i8":D[e]=0;break;case"i16":_e[e>>1]=0;break;case"i32":M[e>>2]=0;break;case"i64":Y[e>>3]=BigInt(0);break;case"float":tt[e>>2]=0;break;case"double":rt[e>>3]=0;break;case"*":T[e>>2]=0;break;default:me(`invalid type for setValue: ${t}`)}}var xt=typeof TextDecoder<"u"?new TextDecoder:void 0,$=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&xt)return xt.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var a=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|a);else{var u=e[t++]&63;i=(i&240)==224?(i&15)<<12|a<<6|u:(i&7)<<18|a<<12|u<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},st=(e,t)=>e?$(A,e,t):"",Pt=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},at=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=Pt(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},Nt=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&=t.slice(0,-1),e+t)},je=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],Rr=()=>{if(V){var e=require("crypto");return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},Tt=e=>{(Tt=Rr())(e)},Ur=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Pt(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},ut=[],Ee=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},te=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var a=0;a<e.length;++a){var u=e.charCodeAt(a);if(55296<=u&&57343>=u){var w=e.charCodeAt(++a);u=65536+((u&1023)<<10)|w&1023}if(127>=u){if(r>=n)break;t[r++]=u}else{if(2047>=u){if(r+1>=n)break;t[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;t[r++]=224|u>>12}else{if(r+3>=n)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63}t[r++]=128|u>>6&63}t[r++]=128|u&63}}return t[r]=0,r-i},jt=(e,t)=>{var r=Array(Ee(e)+1);return e=te(e,r,0,r.length),t&&(r.length=e),r},Dt=[];function Lt(e,t){Dt[e]={input:[],output:[],cb:t},mt(e,$r)}var $r={open(e){var t=Dt[e.node.rdev];if(!t)throw new h(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new h(60);for(var i=0,a=0;a<n;a++){try{var u=e.tty.cb.xb(e.tty)}catch{throw new h(29)}if(u===void 0&&i===0)throw new h(6);if(u==null)break;i++,t[r+a]=u}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new h(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new h(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},xr={xb(){e:{if(!ut.length){var e=null;if(V){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=Ze.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}ut=jt(e,!0)}e=ut.shift()}return e},qb(e,t){t===null||t===10?(St($(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(St($(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Pr={qb(e,t){t===null||t===10?(pe($(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){0<e.output?.length&&(pe($(e.output)),e.output=[])}},g={Wa:null,Xa(){return g.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new h(63);return g.Wa||(g.Wa={dir:{node:{Ta:g.La.Ta,Ua:g.La.Ua,lookup:g.La.lookup,hb:g.La.hb,rename:g.La.rename,unlink:g.La.unlink,rmdir:g.La.rmdir,readdir:g.La.readdir,symlink:g.La.symlink},stream:{Va:g.Ma.Va}},file:{node:{Ta:g.La.Ta,Ua:g.La.Ua},stream:{Va:g.Ma.Va,read:g.Ma.read,write:g.Ma.write,ib:g.Ma.ib,jb:g.Ma.jb}},link:{node:{Ta:g.La.Ta,Ua:g.La.Ua,readlink:g.La.readlink},stream:{}},ub:{node:{Ta:g.La.Ta,Ua:g.La.Ua},stream:Lr}}),r=Bt(e,t,r,n),W(r.mode)?(r.La=g.Wa.dir.node,r.Ma=g.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=g.Wa.file.node,r.Ma=g.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=g.Wa.link.node,r.Ma=g.Wa.link.stream):(r.mode&61440)===8192&&(r.La=g.Wa.ub.node,r.Ma=g.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,W(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw g.vb},hb(e,t,r,n){return g.createNode(e,t,r,n)},rename(e,t,r){try{var n=ue(t,r)}catch{}if(n){if(W(e.mode))for(var i in n.Na)throw new h(55);ht(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=ue(e,t),n;for(n in r.Na)throw new h(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=g.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new h(28);return e.link}},Ma:{read(e,t,r,n,i){var a=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&a.subarray)t.set(a.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=a[i+n];return e},write(e,t,r,n,i,a){if(t.buffer===D.buffer&&(a=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(a)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}a=i+n;var u=e.Na?e.Na.length:0;if(u>=a||(a=Math.max(a,u*(1048576>u?2:1.125)>>>0),u!=0&&(a=Math.max(a,256)),u=e.Na,e.Na=new Uint8Array(a),0<e.Ra&&e.Na.set(u.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(a=0;a<n;a++)e.Na[i+a]=t[r+a];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new h(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new h(43);if(e=e.node.Na,i&2||!e||e.buffer!==D.buffer){i=!0,n=65536*Math.ceil(t/65536);var a=ir(65536,n);if(a&&A.fill(0,a,a+n),n=a,!n)throw new h(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),D.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return g.Ma.write(e,t,0,n,r,!1),0}}},It=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},lt=null,Ot={},de=[],Nr=1,ne=null,Ct=!1,Wt=!0,Ft={},h=class{name="ErrnoError";constructor(e){this.Pa=e}},Tr=class{gb={};node=null;get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},jr=class{La={};Ma={};ab=null;constructor(e,t,r,n){e||=this,this.parent=e,this.Xa=e.Xa,this.id=Nr++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function z(e,t={}){if(!e)throw new h(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(w=>!!w);for(var n=lt,i="/",a=0;a<e.length;a++){var u=a===e.length-1;if(u&&t.parent)break;if(e[a]!==".")if(e[a]==="..")i=Nt(i),n=n.parent;else{i=at(i+"/"+e[a]);try{n=ue(n,e[a])}catch(w){if(w?.Pa===44&&u&&t.Jb)return{path:i};throw w}if(!n.ab||u&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!u||t.$a)){if(!n.La.readlink)throw new h(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=Nt(i)+"/"+n),e=n+"/"+e.slice(a+1).join("/");continue e}}}return{path:i,node:n}}throw new h(32)}function ft(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function ct(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ne.length}function ht(e){var t=ct(e.parent.id,e.name);if(ne[t]===e)ne[t]=e.bb;else for(t=ne[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function ue(e,t){var r=W(e.mode)?(r=we(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new h(r);for(r=ne[ct(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function Bt(e,t,r,n){return e=new jr(e,t,r,n),t=ct(e.parent.id,e.name),e.bb=ne[t],ne[t]=e}function W(e){return(e&61440)===16384}function zt(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function we(e,t){if(Wt)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Qt(e,t){if(!W(e.mode))return 54;try{return ue(e,t),20}catch{}return we(e,"wx")}function Ht(e,t,r){try{var n=ue(e,t)}catch(i){return i.Pa}if(e=we(e,"wx"))return e;if(r){if(!W(n.mode))return 54;if(n===n.parent||ft(n)==="/")return 10}else if(W(n.mode))return 31;return 0}function De(e){if(!e)throw new h(63);return e}function O(e){if(e=de[e],!e)throw new h(8);return e}function Vt(e,t=-1){if(e=Object.assign(new Tr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!de[t])break e;throw new h(33)}return e.fd=t,de[t]=e}function Dr(e,t=-1){return e=Vt(e,t),e.Ma?.Rb?.(e),e}function pt(e,t,r){var n=e?.Ma.Ua;e=n?e:t,n??=t.La.Ua,De(n),n(e,r)}var Lr={open(e){e.Ma=Ot[e.node.rdev].Ma,e.Ma.open?.(e)},Va(){throw new h(70)}};function mt(e,t){Ot[e]={Ma:t}}function Xt(e,t){var r=t==="/";if(r&&lt)throw new h(10);if(!r&&t){var n=z(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new h(10);if(!W(n.mode))throw new h(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?lt=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function Le(e,t,r){var n=z(e,{parent:!0}).node;if(e=je(e),!e)throw new h(28);if(e==="."||e==="..")throw new h(20);var i=Qt(n,e);if(i)throw new h(i);if(!n.La.hb)throw new h(63);return n.La.hb(n,e,t,r)}function Ir(e,t=438){return Le(e,t&4095|32768,0)}function Z(e,t=511){return Le(e,t&1023|16384,0)}function Ie(e,t,r){typeof r>"u"&&(r=t,t=438),Le(e,t|8192,r)}function dt(e,t){if(!Ur(e))throw new h(44);var r=z(t,{parent:!0}).node;if(!r)throw new h(44);t=je(t);var n=Qt(r,t);if(n)throw new h(n);if(!r.La.symlink)throw new h(63);r.La.symlink(r,t,e)}function Yt(e){var t=z(e,{parent:!0}).node;e=je(e);var r=ue(t,e),n=Ht(t,e,!0);if(n)throw new h(n);if(!t.La.rmdir)throw new h(63);if(r.ab)throw new h(10);t.La.rmdir(t,e),ht(r)}function Gt(e){var t=z(e,{parent:!0}).node;if(!t)throw new h(44);e=je(e);var r=ue(t,e),n=Ht(t,e,!1);if(n)throw new h(n);if(!t.La.unlink)throw new h(63);if(r.ab)throw new h(10);t.La.unlink(t,e),ht(r)}function qe(e,t){return e=z(e,{$a:!t}).node,De(e.La.Ta)(e)}function Jt(e,t,r,n){pt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function Oe(e,t){e=typeof e=="string"?z(e,{$a:!0}).node:e,Jt(null,e,t)}function Kt(e,t,r){if(W(t.mode))throw new h(31);if((t.mode&61440)!==32768)throw new h(28);var n=we(t,"w");if(n)throw new h(n);pt(e,t,{size:r,timestamp:Date.now()})}function be(e,t,r=438){if(e==="")throw new h(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=z(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var a=!1;if(t&64)if(n){if(t&128)throw new h(20)}else{if(i)throw new h(31);n=Le(e,r|511,0),a=!0}if(!n)throw new h(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!W(n.mode))throw new h(54);if(!a&&(i=n?(n.mode&61440)===40960?32:W(n.mode)&&(zt(t)!=="r"||t&576)?31:we(n,zt(t)):44))throw new h(i);return t&512&&!a&&(i=n,i=typeof i=="string"?z(i,{$a:!0}).node:i,Kt(null,i,0)),t&=-131713,i=Vt({node:n,path:ft(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),a&&Oe(n,r&511),!o.logReadFiles||t&1||e in Ft||(Ft[e]=1),i}function wt(e){if(e.fd===null)throw new h(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{de[e.fd]=null}e.fd=null}function Zt(e,t,r){if(e.fd===null)throw new h(8);if(!e.seekable||!e.Ma.Va)throw new h(70);if(r!=0&&r!=1&&r!=2)throw new h(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function er(e,t,r,n,i){if(0>n||0>i)throw new h(28);if(e.fd===null)throw new h(8);if((e.flags&2097155)===1)throw new h(8);if(W(e.node.mode))throw new h(31);if(!e.Ma.read)throw new h(28);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new h(70);return t=e.Ma.read(e,t,r,n,i),a||(e.position+=t),t}function tr(e,t,r,n,i){if(0>n||0>i)throw new h(28);if(e.fd===null)throw new h(8);if(!(e.flags&2097155))throw new h(8);if(W(e.node.mode))throw new h(31);if(!e.Ma.write)throw new h(28);e.seekable&&e.flags&1024&&Zt(e,0,2);var a=typeof i<"u";if(!a)i=e.position;else if(!e.seekable)throw new h(70);return t=e.Ma.write(e,t,r,n,i,void 0),a||(e.position+=t),t}function Or(e){var t="binary";if(t!=="utf8"&&t!=="binary")throw Error(`Invalid encoding type "${t}"`);var r,n=be(e,n||0);e=qe(e).size;var i=new Uint8Array(e);return er(n,i,0,e,0),t==="utf8"?r=$(i):t==="binary"&&(r=i),wt(n),r}function ie(e,t,r){e=at("/dev/"+e);var n=It(!!t,!!r);ie.yb??(ie.yb=64);var i=ie.yb++<<8|0;mt(i,{open(a){a.seekable=!1},close(){r?.buffer?.length&&r(10)},read(a,u,w,q){for(var E=0,x=0;x<q;x++){try{var F=t()}catch{throw new h(29)}if(F===void 0&&E===0)throw new h(6);if(F==null)break;E++,u[w+x]=F}return E&&(a.node.atime=Date.now()),E},write(a,u,w,q){for(var E=0;E<q;E++)try{r(u[w+E])}catch{throw new h(29)}return q&&(a.node.mtime=a.node.ctime=Date.now()),E}}),Ie(e,n,i)}var U={};function le(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":O(e).path,t.length==0){if(!r)throw new h(44);return e}return e+"/"+t}function Ce(e,t){M[e>>2]=t.dev,M[e+4>>2]=t.mode,T[e+8>>2]=t.nlink,M[e+12>>2]=t.uid,M[e+16>>2]=t.gid,M[e+20>>2]=t.rdev,Y[e+24>>3]=BigInt(t.size),M[e+32>>2]=4096,M[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return Y[e+40>>3]=BigInt(Math.floor(r/1e3)),T[e+48>>2]=r%1e3*1e6,Y[e+56>>3]=BigInt(Math.floor(n/1e3)),T[e+64>>2]=n%1e3*1e6,Y[e+72>>3]=BigInt(Math.floor(i/1e3)),T[e+80>>2]=i%1e3*1e6,Y[e+88>>3]=BigInt(t.ino),0}var We=void 0,Fe=()=>{var e=M[+We>>2];return We+=4,e},bt=0,Cr=[0,31,60,91,121,152,182,213,244,274,305,335],Wr=[0,31,59,90,120,151,181,212,243,273,304,334],ke={},rr=e=>{et=e,ot||0<bt||(o.onExit?.(e),Ne=!0),N(e,new it(e))},Fr=e=>{if(!Ne)try{if(e(),!(ot||0<bt))try{et=e=et,rr(e)}catch(t){t instanceof it||t=="unwind"||N(1,t)}}catch(t){t instanceof it||t=="unwind"||N(1,t)}},yt={},nr=()=>{if(!_t){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:K||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);_t=r}return _t},_t,vt=e=>{var t=Ee(e)+1,r=se(t);return te(e,A,r,t),r},Br=(e,t,r,n)=>{var i={string:E=>{var x=0;return E!=null&&E!==0&&(x=vt(E)),x},array:E=>{var x=se(E.length);return D.set(E,x),x}};e=o["_"+e];var a=[],u=0;if(n)for(var w=0;w<n.length;w++){var q=i[r[w]];q?(u===0&&(u=Me()),a[w]=q(n[w])):a[w]=n[w]}return r=e(...a),r=function(E){return u!==0&&Se(u),t==="string"?E?$(A,E):"":t==="boolean"?!!E:E}(r)},Be=0,ze=(e,t)=>(t=t==1?se(e.length):Et(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),A.set(e,t),t),fe,gt=[],re,oe=e=>{fe.delete(re.get(e)),re.set(e,null),gt.push(e)},Ae=(e,t)=>{if(!fe){fe=new WeakMap;var r=re.length;if(fe)for(var n=0;n<0+r;n++){var i=re.get(n);i&&fe.set(i,n)}}if(r=fe.get(e)||0)return r;if(gt.length)r=gt.pop();else{try{re.grow(1)}catch(q){throw q instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":q}r=re.length-1}try{re.set(r,e)}catch(q){if(!(q instanceof TypeError))throw q;if(typeof WebAssembly.Function=="function"){var a=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var u=1;u<t.length;++u)i.parameters.push(n[t[u]]);t=new a(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),u={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var w=t.length;128>w?n.push(w):n.push(w%128|128,w>>7);for(a of t)n.push(u[a]);i=="v"?n.push(0):n.push(1,u[i]),t=[0,97,115,109,1,0,0,0,1],a=n.length,128>a?t.push(a):t.push(a%128|128,a>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}re.set(r,t)}return fe.set(e,r),r};ne=Array(4096),Xt(g,"/"),Z("/tmp"),Z("/home"),Z("/home/web_user"),function(){Z("/dev"),mt(259,{read:()=>0,write:(n,i,a,u)=>u,Va:()=>0}),Ie("/dev/null",259),Lt(1280,xr),Lt(1536,Pr),Ie("/dev/tty",1280),Ie("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(Tt(e),t=e.byteLength),e[--t]);ie("random",r),ie("urandom",r),Z("/dev/shm"),Z("/dev/shm/tmp")}(),function(){Z("/proc");var e=Z("/proc/self");Z("/proc/self/fd"),Xt({Xa(){var t=Bt(e,"fd",16895,73);return t.Ma={Va:g.Ma.Va},t.La={lookup(r,n){r=+n;var i=O(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(de.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),g.vb=new h(44),g.vb.stack="<generic error, no stack>";var zr={a:(e,t,r,n)=>me(`Assertion failed: ${e?$(A,e):""}, at: `+[t?t?$(A,t):"":"unknown filename",r,n?n?$(A,n):"":"unknown function"]),i:function(e,t){try{return e=e?$(A,e):"",Oe(e,t),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?$(A,t):"",t=le(e,t),r&-8)return-28;var n=z(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&we(n,e)?-2:0):-44}catch(i){if(typeof U>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=O(e);return Jt(r,r.node,t,!1),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=O(e);return pt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){We=r;try{var n=O(e);switch(t){case 0:var i=Fe();if(0>i)break;for(;de[i];)i++;return Dr(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Fe(),n.flags|=i,0;case 12:return i=Fe(),_e[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},g:function(e,t){try{var r=O(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??=n.La.Ta,De(i);var a=i(e);return Ce(t,a)}catch(u){if(typeof U>"u"||u.name!=="ErrnoError")throw u;return-u.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=O(e);if(0>t||!(r.flags&2097155))throw new h(28);return Kt(r,r.node,t),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=Ee("/")+1;return t<r?-68:(te("/",A,e,t),r)}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?$(A,e):"",Ce(t,qe(e,!0))}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?$(A,t):"",t=le(e,t),Z(t,r),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?$(A,t):"";var i=n&256;return t=le(e,t,n&4096),Ce(r,i?qe(t,!0):qe(t))}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},x:function(e,t,r,n){We=n;try{t=t?$(A,t):"",t=le(e,t);var i=n?Fe():0;return be(t,r,i).fd}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return-a.Pa}},v:function(e,t,r,n){try{if(t=t?$(A,t):"",t=le(e,t),0>=n)return-28;var i=z(t).node;if(!i)throw new h(44);if(!i.La.readlink)throw new h(28);var a=i.La.readlink(i),u=Math.min(n,Ee(a)),w=D[r+u];return te(a,A,r,n+1),D[r+u]=w,u}catch(q){if(typeof U>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},u:function(e){try{return e=e?$(A,e):"",Yt(e),0}catch(t){if(typeof U>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?$(A,e):"",Ce(t,qe(e))}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?$(A,t):"",t=le(e,t),r===0?Gt(t):r===512?Yt(t):me("Invalid flags passed to unlinkat"),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?$(A,t):"",t=le(e,t,!0);var n=Date.now(),i,a;if(r){var u=T[r>>2]+4294967296*M[r+4>>2],w=M[r+8>>2];w==1073741823?i=n:w==1073741822?i=null:i=1e3*u+w/1e6,r+=16,u=T[r>>2]+4294967296*M[r+4>>2],w=M[r+8>>2],w==1073741823?a=n:w==1073741822?a=null:a=1e3*u+w/1e6}else a=i=n;if((a??i)!==null){e=i;var q=z(t,{$a:!0}).node;De(q.La.Ua)(q,{atime:e,mtime:a})}return 0}catch(E){if(typeof U>"u"||E.name!=="ErrnoError")throw E;return-E.Pa}},m:()=>me(""),l:()=>{ot=!1,bt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),M[t>>2]=e.getSeconds(),M[t+4>>2]=e.getMinutes(),M[t+8>>2]=e.getHours(),M[t+12>>2]=e.getDate(),M[t+16>>2]=e.getMonth(),M[t+20>>2]=e.getFullYear()-1900,M[t+24>>2]=e.getDay();var r=e.getFullYear();M[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?Wr:Cr)[e.getMonth()]+e.getDate()-1|0,M[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();M[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,a,u){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var w=O(n);if(t&2&&!(r&2)&&(w.flags&2097155)!==2)throw new h(2);if((w.flags&2097155)===1)throw new h(2);if(!w.Ma.ib)throw new h(43);if(!e)throw new h(28);var q=w.Ma.ib(w,e,i,t,r),E=q.Kb;return M[a>>2]=q.Ab,T[u>>2]=E,0}catch(x){if(typeof U>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},z:function(e,t,r,n,i,a){a=-9007199254740992>a||9007199254740992<a?NaN:Number(a);try{var u=O(i);if(r&2){if(r=a,(u.node.mode&61440)!==32768)throw new h(43);if(!(n&2)){var w=A.slice(e,e+t);u.Ma.jb&&u.Ma.jb(u,w,r,t,n)}}}catch(q){if(typeof U>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},n:(e,t)=>{if(ke[e]&&(clearTimeout(ke[e].id),delete ke[e]),!t)return 0;var r=setTimeout(()=>{delete ke[e],Fr(()=>or(e,performance.now()))},t);return ke[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),a=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),T[e>>2]=60*Math.max(a,i),M[t>>2]=+(a!=i),t=u=>{var w=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(a),t=t(i),i<a?(te(e,A,r,17),te(t,A,n,17)):(te(e,A,n,17),te(t,A,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=A.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-Pe.buffer.byteLength+65535)/65536|0;try{Pe.grow(n),Mt();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return nr().forEach((n,i)=>{var a=t+r;for(i=T[e+4*i>>2]=a,a=0;a<n.length;++a)D[i++]=n.charCodeAt(a);D[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=nr();T[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),T[t>>2]=n,0},e:function(e){try{var t=O(e);return wt(t),0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=O(e);return D[t]=r.tty?2:W(r.mode)?3:(r.mode&61440)===40960?7:4,_e[t+2>>1]=0,Y[t+8>>3]=BigInt(0),Y[t+16>>3]=BigInt(0),0}catch(n){if(typeof U>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=O(e);e=t;for(var a,u=t=0;u<r;u++){var w=T[e>>2],q=T[e+4>>2];e+=8;var E=er(i,D,w,q,a);if(0>E){var x=-1;break e}if(t+=E,E<q)break;typeof a<"u"&&(a+=E)}x=t}return T[n>>2]=x,0}catch(F){if(typeof U>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=O(e);return Zt(i,t,r),Y[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(a){if(typeof U>"u"||a.name!=="ErrnoError")throw a;return a.Pa}},I:function(e){try{var t=O(e);return t.Ma?.fsync?t.Ma.fsync(t):0}catch(r){if(typeof U>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},t:function(e,t,r,n){try{e:{var i=O(e);e=t;for(var a,u=t=0;u<r;u++){var w=T[e>>2],q=T[e+4>>2];e+=8;var E=tr(i,D,w,q,a);if(0>E){var x=-1;break e}if(t+=E,E<q)break;typeof a<"u"&&(a+=E)}x=t}return T[n>>2]=x,0}catch(F){if(typeof U>"u"||F.name!=="ErrnoError")throw F;return F.Pa}},k:rr},d;(async function(){function e(r){return d=r.exports,Pe=d.M,Mt(),re=d.O,ae--,o.monitorRunDependencies?.(ae),ae==0&&ve&&(r=ve,ve=null,r()),d}ae++,o.monitorRunDependencies?.(ae);var t={a:zr};return o.instantiateWasm?new Promise(r=>{o.instantiateWasm(t,(n,i)=>{e(n,i),r(n.exports)})}):(nt??=o.locateFile?o.locateFile("sql-wasm.wasm",X):X+"sql-wasm.wasm",e((await Sr(t)).instance))})(),o._sqlite3_free=e=>(o._sqlite3_free=d.P)(e),o._sqlite3_value_text=e=>(o._sqlite3_value_text=d.Q)(e),o._sqlite3_prepare_v2=(e,t,r,n,i)=>(o._sqlite3_prepare_v2=d.R)(e,t,r,n,i),o._sqlite3_step=e=>(o._sqlite3_step=d.S)(e),o._sqlite3_reset=e=>(o._sqlite3_reset=d.T)(e),o._sqlite3_exec=(e,t,r,n,i)=>(o._sqlite3_exec=d.U)(e,t,r,n,i),o._sqlite3_finalize=e=>(o._sqlite3_finalize=d.V)(e),o._sqlite3_column_name=(e,t)=>(o._sqlite3_column_name=d.W)(e,t),o._sqlite3_column_text=(e,t)=>(o._sqlite3_column_text=d.X)(e,t),o._sqlite3_column_type=(e,t)=>(o._sqlite3_column_type=d.Y)(e,t),o._sqlite3_errmsg=e=>(o._sqlite3_errmsg=d.Z)(e),o._sqlite3_clear_bindings=e=>(o._sqlite3_clear_bindings=d._)(e),o._sqlite3_value_blob=e=>(o._sqlite3_value_blob=d.$)(e),o._sqlite3_value_bytes=e=>(o._sqlite3_value_bytes=d.aa)(e),o._sqlite3_value_double=e=>(o._sqlite3_value_double=d.ba)(e),o._sqlite3_value_int=e=>(o._sqlite3_value_int=d.ca)(e),o._sqlite3_value_type=e=>(o._sqlite3_value_type=d.da)(e),o._sqlite3_result_blob=(e,t,r,n)=>(o._sqlite3_result_blob=d.ea)(e,t,r,n),o._sqlite3_result_double=(e,t)=>(o._sqlite3_result_double=d.fa)(e,t),o._sqlite3_result_error=(e,t,r)=>(o._sqlite3_result_error=d.ga)(e,t,r),o._sqlite3_result_int=(e,t)=>(o._sqlite3_result_int=d.ha)(e,t),o._sqlite3_result_int64=(e,t)=>(o._sqlite3_result_int64=d.ia)(e,t),o._sqlite3_result_null=e=>(o._sqlite3_result_null=d.ja)(e),o._sqlite3_result_text=(e,t,r,n)=>(o._sqlite3_result_text=d.ka)(e,t,r,n),o._sqlite3_aggregate_context=(e,t)=>(o._sqlite3_aggregate_context=d.la)(e,t),o._sqlite3_column_count=e=>(o._sqlite3_column_count=d.ma)(e),o._sqlite3_data_count=e=>(o._sqlite3_data_count=d.na)(e),o._sqlite3_column_blob=(e,t)=>(o._sqlite3_column_blob=d.oa)(e,t),o._sqlite3_column_bytes=(e,t)=>(o._sqlite3_column_bytes=d.pa)(e,t),o._sqlite3_column_double=(e,t)=>(o._sqlite3_column_double=d.qa)(e,t),o._sqlite3_bind_blob=(e,t,r,n,i)=>(o._sqlite3_bind_blob=d.ra)(e,t,r,n,i),o._sqlite3_bind_double=(e,t,r)=>(o._sqlite3_bind_double=d.sa)(e,t,r),o._sqlite3_bind_int=(e,t,r)=>(o._sqlite3_bind_int=d.ta)(e,t,r),o._sqlite3_bind_text=(e,t,r,n,i)=>(o._sqlite3_bind_text=d.ua)(e,t,r,n,i),o._sqlite3_bind_parameter_index=(e,t)=>(o._sqlite3_bind_parameter_index=d.va)(e,t),o._sqlite3_sql=e=>(o._sqlite3_sql=d.wa)(e),o._sqlite3_normalized_sql=e=>(o._sqlite3_normalized_sql=d.xa)(e),o._sqlite3_changes=e=>(o._sqlite3_changes=d.ya)(e),o._sqlite3_close_v2=e=>(o._sqlite3_close_v2=d.za)(e),o._sqlite3_create_function_v2=(e,t,r,n,i,a,u,w,q)=>(o._sqlite3_create_function_v2=d.Aa)(e,t,r,n,i,a,u,w,q),o._sqlite3_update_hook=(e,t,r)=>(o._sqlite3_update_hook=d.Ba)(e,t,r),o._sqlite3_open=(e,t)=>(o._sqlite3_open=d.Ca)(e,t);var Et=o._malloc=e=>(Et=o._malloc=d.Da)(e),Qe=o._free=e=>(Qe=o._free=d.Ea)(e);o._RegisterExtensionFunctions=e=>(o._RegisterExtensionFunctions=d.Fa)(e);var ir=(e,t)=>(ir=d.Ga)(e,t),or=(e,t)=>(or=d.Ha)(e,t),Se=e=>(Se=d.Ia)(e),se=e=>(se=d.Ja)(e),Me=()=>(Me=d.Ka)();o.stackSave=()=>Me(),o.stackRestore=e=>Se(e),o.stackAlloc=e=>se(e),o.cwrap=(e,t,r,n)=>{var i=!r||r.every(a=>a==="number"||a==="boolean");return t!=="string"&&i&&!n?o["_"+e]:(...a)=>Br(e,t,r,a)},o.addFunction=Ae,o.removeFunction=oe,o.UTF8ToString=st,o.ALLOC_NORMAL=Be,o.allocate=ze,o.allocateUTF8OnStack=vt;function qt(){function e(){if(o.calledRun=!0,!Ne){if(!o.noFSInit&&!Ct){var t,r;Ct=!0,n??=o.stdin,t??=o.stdout,r??=o.stderr,n?ie("stdin",n):dt("/dev/tty","/dev/stdin"),t?ie("stdout",null,t):dt("/dev/tty","/dev/stdout"),r?ie("stderr",null,r):dt("/dev/tty1","/dev/stderr"),be("/dev/stdin",0),be("/dev/stdout",1),be("/dev/stderr",1)}if(d.N(),Wt=!1,o.onRuntimeInitialized?.(),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var n=o.postRun.shift();Ut.unshift(n)}Rt(Ut)}}if(0<ae)ve=qt;else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Mr();Rt($t),0<ae?ve=qt:o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),e()},1)):e()}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return qt(),y}),Xe)};typeof Ge=="object"&&typeof he=="object"?(he.exports=Ye,he.exports.default=Ye):typeof define=="function"&&define.amd?define([],function(){return Ye}):typeof Ge=="object"&&(Ge.Module=Ye)});var In={};An(In,{activate:()=>Mn,deactivate:()=>Ln});module.exports=Sn(In);var L=Re(require("vscode")),H=Re(require("fs")),R=Re(require("path")),_r=Re(require("https")),vr=Re(wr()),Je=null,j,Ue;function Mn(p){console.log("Cursor Usage Tracker \u5DF2\u6FC0\u6D3B"),j=L.window.createStatusBarItem(L.StatusBarAlignment.Right,100),j.tooltip="Cursor \u914D\u989D\u4FE1\u606F",p.subscriptions.push(j);let f=L.commands.registerCommand("cursor-usage-tracker.refresh",()=>At());p.subscriptions.push(f);let c=L.commands.registerCommand("cursor-usage-tracker.showLogs",()=>{ye||(ye=L.window.createOutputChannel("Cursor Usage Tracker")),ye.show()});p.subscriptions.push(c),At(),br(),L.workspace.onDidChangeConfiguration(y=>{y.affectsConfiguration("cursorUsageTracker")&&br()})}function br(){Ue&&clearInterval(Ue);let f=L.workspace.getConfiguration("cursorUsageTracker").get("refreshInterval",300)*1e3;Ue=setInterval(()=>{At()},f)}var ye;function b(p){ye||(ye=L.window.createOutputChannel("Cursor Usage Tracker"));let f=new Date().toLocaleTimeString();ye.appendLine(`[${f}] ${p}`),console.log(`[Cursor Usage Tracker] ${p}`)}async function Rn(){let p=Un();b(`\u5F00\u59CB\u641C\u7D22\u7528\u6237 ID\uFF0C\u5171 ${p.length} \u4E2A\u5019\u9009\u8DEF\u5F84`);for(let f of p)try{b(`\u5C1D\u8BD5\u8DEF\u5F84: ${f}`);let c=await gr(f);if(c)return b(`\u2713 \u6210\u529F\u627E\u5230\u7528\u6237 ID: ${c}`),c;b("  - \u672A\u5728\u6B64\u8DEF\u5F84\u627E\u5230\u7528\u6237 ID")}catch(c){b(`  - \u8BFB\u53D6\u5931\u8D25: ${c}`)}return b("\u2717 \u6240\u6709\u8DEF\u5F84\u90FD\u672A\u627E\u5230\u7528\u6237 ID"),null}function Un(){let p=[],f=process.env.HOME||process.env.USERPROFILE||"";if(process.platform==="win32"){let c=process.env.APPDATA||R.join(f,"AppData","Roaming");p.push(R.join(c,"Cursor","sentry","scope_v3.json"),R.join(c,"Cursor","sentry","session.json"),R.join(c,"Cursor","User","globalStorage","storage.json"),R.join(c,"Cursor","storage.json"),R.join(c,"Cursor","User","settings.json"),R.join(f,".cursor","storage.json"),R.join(f,".cursor-tutor","storage.json"))}else process.platform==="darwin"?p.push(R.join(f,"Library","Application Support","Cursor","sentry","scope_v3.json"),R.join(f,"Library","Application Support","Cursor","sentry","session.json"),R.join(f,"Library","Application Support","Cursor","User","globalStorage","storage.json"),R.join(f,"Library","Application Support","Cursor","storage.json"),R.join(f,".cursor","storage.json")):p.push(R.join(f,".config","Cursor","sentry","scope_v3.json"),R.join(f,".config","Cursor","sentry","session.json"),R.join(f,".config","Cursor","User","globalStorage","storage.json"),R.join(f,".config","Cursor","storage.json"),R.join(f,".cursor","storage.json"));return p}async function gr(p){try{if(!H.existsSync(p)){b(`  - \u6587\u4EF6\u4E0D\u5B58\u5728: ${p}`);let c=R.dirname(p);return H.existsSync(c)&&H.statSync(c).isDirectory()?(b(`  - \u5C1D\u8BD5\u641C\u7D22\u76EE\u5F55: ${c}`),await qr(c)):null}b("  - \u6587\u4EF6\u5B58\u5728\uFF0C\u8BFB\u53D6\u5185\u5BB9...");let f=H.readFileSync(p,"utf8");b(`  - \u6587\u4EF6\u5927\u5C0F: ${f.length} \u5B57\u8282`);try{let c=JSON.parse(f);if(c.scope?.user?.id){b(`  - \u53D1\u73B0 scope.user.id: ${c.scope.user.id}`);let o=yr(c.scope.user.id);if(o)return b(`  - \u63D0\u53D6\u7528\u6237 ID: ${o}`),o}if(c.did){b(`  - \u53D1\u73B0 did: ${c.did}`);let o=yr(c.did);if(o)return b(`  - \u63D0\u53D6\u7528\u6237 ID: ${o}`),o}let y=["cursorAuth/cachedSignInMethod","userId","user_id","id"];for(let o of y)if(c[o]&&typeof c[o]=="string"&&c[o].startsWith("user_"))return b(`  - \u53D1\u73B0 ${o}: ${c[o]}`),c[o];let k=Er(c);return k&&b(`  - \u9012\u5F52\u641C\u7D22\u627E\u5230: ${k}`),k}catch{b("  - JSON \u89E3\u6790\u5931\u8D25\uFF0C\u5C1D\u8BD5\u6B63\u5219\u5339\u914D...");let y=f.match(/user_[a-zA-Z0-9]{20,}/);if(y)return b(`  - \u6B63\u5219\u5339\u914D\u627E\u5230: ${y[0]}`),y[0]}}catch(f){b(`  - \u8BFB\u53D6\u6587\u4EF6\u5931\u8D25: ${f}`)}return null}function yr(p){if(!p||typeof p!="string")return null;if(p.includes("|")){let c=p.split("|").find(y=>y.startsWith("user_"));if(c)return c}return p.startsWith("user_")?p:null}function Er(p){if(!p||typeof p!="object")return null;for(let f in p){let c=p[f];if(typeof c=="string"&&c.startsWith("user_")&&c.length>20)return c;if(typeof c=="object"){let y=Er(c);if(y)return y}}return null}async function qr(p){try{let f=H.readdirSync(p);for(let c of f){let y=R.join(p,c),k=H.statSync(y);if(k.isFile()&&(c.endsWith(".json")||c==="storage.json")){let o=await gr(y);if(o)return o}else if(k.isDirectory()&&!c.startsWith(".")){let o=await qr(y);if(o)return o}}}catch(f){console.error(`\u641C\u7D22\u76EE\u5F55\u5931\u8D25: ${p}`,f)}return null}function $n(){let p=process.env.HOME||process.env.USERPROFILE||"";if(process.platform==="win32"){let f=process.env.APPDATA||R.join(p,"AppData","Roaming");return R.join(f,"Cursor","User","globalStorage","state.vscdb")}else return process.platform==="darwin"?R.join(p,"Library","Application Support","Cursor","User","globalStorage","state.vscdb"):R.join(p,".config","Cursor","User","globalStorage","state.vscdb")}async function xn(){if(Je)return b("\u4F7F\u7528\u7F13\u5B58\u7684 accessToken"),Je;let p=$n();if(b(`\u5C1D\u8BD5\u8BFB\u53D6\u6570\u636E\u5E93: ${p}`),!H.existsSync(p))return b(`\u2717 \u6570\u636E\u5E93\u6587\u4EF6\u4E0D\u5B58\u5728: ${p}`),null;try{let f=await(0,vr.default)({locateFile:o=>R.join(__dirname,o)}),c=H.readFileSync(p),y=new f.Database(c),k=y.exec("SELECT value FROM ItemTable WHERE key = 'cursorAuth/accessToken'");if(k.length>0&&k[0].values.length>0){let o=k[0].values[0][0];return b("\u2713 \u6210\u529F\u83B7\u53D6 accessToken"),Je=o,y.close(),o}else{b("\u2717 \u672A\u627E\u5230 accessToken");let o=y.exec("SELECT key FROM ItemTable WHERE key LIKE '%cursorAuth%'");return o.length>0&&b(`  - \u627E\u5230\u7684 cursorAuth \u76F8\u5173 key: ${o[0].values.map(P=>P[0]).join(", ")}`),y.close(),null}}catch(f){return b(`\u2717 \u8BFB\u53D6\u6570\u636E\u5E93\u5931\u8D25: ${f}`),null}}async function Pn(p){let f=await xn(),c=f?`${p}%3A%3A${f}`:null,y=(k,o=0)=>new Promise(P=>{if(o>5){b("\u2717 \u91CD\u5B9A\u5411\u6B21\u6570\u8FC7\u591A\uFF0C\u505C\u6B62\u8BF7\u6C42"),P(null);return}b(`\u8BF7\u6C42 API: ${k}${o>0?` (\u91CD\u5B9A\u5411 #${o})`:""}`);let I=new URL(k),V={hostname:I.hostname,path:I.pathname+I.search,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",Accept:"application/json"}};c?(b("  - \u4F7F\u7528 Cookie \u8BA4\u8BC1"),V.headers={...V.headers,Cookie:`WorkosCursorSessionToken=${c}`}):b("  - \u65E0\u8BA4\u8BC1\u4FE1\u606F\uFF0C\u5C1D\u8BD5\u65E0\u8BA4\u8BC1\u8BF7\u6C42"),_r.get(V,C=>{if(b(`API \u54CD\u5E94\u72B6\u6001\u7801: ${C.statusCode}`),C.statusCode===401){b("\u2717 \u8BA4\u8BC1\u5931\u8D25 (401)\uFF0C\u6E05\u9664\u7F13\u5B58\u7684 token"),Je=null,P(null);return}if(C.statusCode&&[301,302,307,308].includes(C.statusCode)){let N=C.headers.location;if(N){b(`  - \u91CD\u5B9A\u5411\u5230: ${N}`);let X=N.startsWith("http")?N:`https://www.cursor.com${N}`;P(y(X,o+1))}else b("\u2717 \u91CD\u5B9A\u5411\u4F46\u6CA1\u6709 Location \u5934"),P(null);return}let K="";C.on("data",N=>{K+=N}),C.on("end",()=>{b(`API \u54CD\u5E94\u6570\u636E\u957F\u5EA6: ${K.length} \u5B57\u8282`);try{let N=JSON.parse(K);N.error?(b(`\u2717 API \u8FD4\u56DE\u9519\u8BEF: ${N.error}`),P(null)):(b("\u2713 API \u8BF7\u6C42\u6210\u529F"),b(`  - GPT-4 \u8BF7\u6C42\u6570: ${N["gpt-4"]?.numRequests||"N/A"}`),b(`  - GPT-4 \u6700\u5927\u8BF7\u6C42\u6570: ${N["gpt-4"]?.maxRequestUsage||"N/A"}`),P(N))}catch(N){b(`\u2717 JSON \u89E3\u6790\u5931\u8D25: ${N}`),b(`  - \u539F\u59CB\u6570\u636E: ${K.substring(0,200)}...`),P(null)}})}).on("error",C=>{b(`\u2717 \u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25: ${C}`),P(null)})});return y(`https://cursor.com/api/usage?user=${p}`)}var Nn=null,Tn=null;async function At(){if(b("========== \u5F00\u59CB\u5237\u65B0\u914D\u989D =========="),!L.workspace.getConfiguration("cursorUsageTracker").get("showInStatusBar",!0)){b("\u72B6\u6001\u680F\u663E\u793A\u5DF2\u7981\u7528\uFF0C\u8DF3\u8FC7\u5237\u65B0"),j.hide();return}j.text="$(sync~spin) \u83B7\u53D6\u4E2D...",j.show();try{b("\u6B65\u9AA4 1: \u83B7\u53D6\u7528\u6237 ID...");let c=await Rn();if(!c){b("\u2717 \u83B7\u53D6\u7528\u6237 ID \u5931\u8D25"),j.text="$(warning) \u65E0 ID",j.tooltip="\u65E0\u6CD5\u81EA\u52A8\u83B7\u53D6 User ID\uFF0C\u8BF7\u70B9\u51FB\u67E5\u770B\u65E5\u5FD7",j.command="cursor-usage-tracker.showLogs";return}b("\u6B65\u9AA4 2: \u8C03\u7528 API \u83B7\u53D6\u914D\u989D\u6570\u636E..."),Tn=c;let y=await Pn(c);if(!y){b("\u2717 API \u8BF7\u6C42\u5931\u8D25"),j.text="$(error) \u5931\u8D25",j.tooltip="\u65E0\u6CD5\u4ECE Cursor API \u83B7\u53D6\u6570\u636E\uFF0C\u8BF7\u70B9\u51FB\u67E5\u770B\u65E5\u5FD7",j.command="cursor-usage-tracker.showLogs";return}b("\u2713 \u914D\u989D\u6570\u636E\u83B7\u53D6\u6210\u529F"),Nn=y,jn(y),b("========== \u5237\u65B0\u5B8C\u6210 ==========")}catch(c){b(`\u2717 \u5237\u65B0\u8FC7\u7A0B\u53D1\u751F\u5F02\u5E38: ${c}`),j.text="$(error) \u9519\u8BEF"}}function jn(p){let f=p["gpt-4"];if(f&&f.maxRequestUsage){let c=f.numRequests,y=f.maxRequestUsage,k=y-c,o=Math.round(c/y*100),P="$(circle-filled)",I="";o>=70?(P="$(circle-filled)",I=""):o>=30?(P="$(circle-filled)",I="statusBarItem.warningBackground"):(P="$(circle-filled)",I="statusBarItem.errorBackground"),j.text=`${P} ${k}`,j.tooltip=Dn(p),I?j.backgroundColor=new L.ThemeColor(I):j.backgroundColor=void 0}else j.text="$(info) Cursor",j.tooltip="\u65E0\u6CD5\u83B7\u53D6\u914D\u989D\u4FE1\u606F";j.show()}function Dn(p){let f=new L.MarkdownString;f.isTrusted=!0;let c=p["gpt-4"];if(c){let y=c.numRequests,k=c.maxRequestUsage||"\u221E",o=typeof k=="number"?k-y:"\u221E",P=typeof k=="number"?Math.round(y/k*100):0;f.appendMarkdown(`### \u{1F916} Cursor \u914D\u989D
`),f.appendMarkdown(`**${o}** / ${k} \u8BF7\u6C42\u53EF\u7528

`);let I=10,V=Math.round(P/100*I),C=I-V,K="\u2588".repeat(V)+"\u2591".repeat(C);f.appendMarkdown(`\`[${K}] ${P}%\`

`),f.appendMarkdown(`--- 
`),f.appendMarkdown(`- **\u5DF2\u7528**: ${y}
`),f.appendMarkdown(`- **Tokens**: ${(c.numTokens/1e6).toFixed(2)}M
`)}if(p.startOfMonth){let y=new Date(p.startOfMonth),k=new Date(y);k.setMonth(k.getMonth()+1);let o=Math.ceil((k.getTime()-Date.now())/(1e3*60*60*24));f.appendMarkdown(`
---
`),f.appendMarkdown(`\u{1F4C5} **${o}\u5929** \u540E\u91CD\u7F6E (${k.toLocaleDateString()})`)}return f}function Ln(){Ue&&clearInterval(Ue)}0&&(module.exports={activate,deactivate});
